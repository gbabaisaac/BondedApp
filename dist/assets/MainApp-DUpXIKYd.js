const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoveModeNew-BKKdG47O.js","assets/ui-vendor-D_t-keVG.js","assets/react-vendor-VqAh-rcM.js","assets/index-BYJfFurX.js","assets/supabase-vendor-l2BGu7mn.js","assets/index-DoJ9ifuX.css"])))=>i.map(i=>d[i]);
import{j as n,g as ye,X as he,h as vt,i as yr,F as vr,k as wr,l as jr,m as Ae,n as Sr,o as Nr,p as Cr,P as Er,S as ze,B as kr,G as rt,q as Lt,r as Fr,I as Pr,s as Rr,L as _e,t as Ut,u as Br,H as Te,v as Vt,w as ct,x as Dr,y as wt,z as Ir,C as Ar,D as _r,E as Tr,J as Mr,K as Or,N as $r,a as Wr,d as zr}from"./ui-vendor-D_t-keVG.js";import{r as a,d as dt,b as Lr,c as Ur,R as re}from"./react-vendor-VqAh-rcM.js";import{u as pe,c as X,a as Vr,B as Y,b as k,p as ot,d as Le,i as Hr,e as Ht,_ as Gr,C as Yr,f as qr}from"./index-BYJfFurX.js";import{a as ne,b as Gt,d as Xr}from"./supabase-vendor-l2BGu7mn.js";const Kr="https://wmlklvlnxftedtylgxsc.supabase.co",st=Kr.replace("https://","").replace(".supabase.co",""),Zr={CHAT_COUNTS:1e4};function Jr({children:e,activeTab:t,onTabChange:r,hideNavigation:o=!1,onUnreadCountChange:s,onPostComposerOpen:l}){const c=pe(),[i,u]=a.useState(0),[d,h]=a.useState(0);a.useEffect(()=>{if(c){m();const x=setInterval(m,Zr.CHAT_COUNTS);return()=>clearInterval(x)}},[c]),a.useEffect(()=>{s&&s(d)},[d,s]);const m=async()=>{if(c)try{const x=await fetch(`https://${st}.supabase.co/functions/v1/make-server-2516be19/soft-intros/incoming`,{headers:{Authorization:`Bearer ${c}`}});if(x.ok){const p=(await x.json()).filter(w=>w.status==="pending");u(p.length)}const b=await fetch(`https://${st}.supabase.co/functions/v1/make-server-2516be19/chats`,{headers:{Authorization:`Bearer ${c}`}});if(b.ok){const p=(await b.json()).reduce((w,y)=>w+(y.unreadCount||0),0);h(p)}}catch{}};a.useEffect(()=>(window.__refreshNavCounts=m,()=>{delete window.__refreshNavCounts}),[c]);const g=[{id:"discover",emoji:"ðŸ ",label:"Yearbook",badge:0},{id:"forum",emoji:"ðŸ’­",label:"Forum",badge:0},{id:"matches",emoji:"ðŸ‘¥",label:"Friends",badge:i},{id:"messages",emoji:"ðŸ’¬",label:"Messages",badge:d},{id:"profile",emoji:"ðŸ‘¤",label:"Profile",badge:0}];return n.jsxs("div",{className:"h-full flex flex-col",style:{height:"100%",position:"relative"},children:[n.jsx("div",{"data-content-area":!0,className:"flex-1 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",paddingBottom:"calc(4rem + env(safe-area-inset-bottom))",scrollbarWidth:"none",msOverflowStyle:"none"},children:e}),!o&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[9999]",style:{position:"fixed",zIndex:9999,paddingBottom:"env(safe-area-inset-bottom)",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",borderTop:"1px solid var(--color-border-light)",height:"var(--bottom-nav-height)",boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.08)"},children:n.jsx("div",{className:"flex items-center justify-around px-2 py-3",children:g.map(x=>{const b=t===x.id;return n.jsxs("button",{onClick:()=>r(x.id),className:"flex-1 flex flex-col items-center justify-center gap-1 transition-all duration-300 relative",children:[n.jsxs("div",{className:"relative flex items-center justify-center",children:[n.jsx("span",{className:"text-2xl transition-all duration-300",style:{transform:b?"scale(1.1)":"scale(1)",opacity:b?1:.5},children:x.emoji}),x.badge>0&&n.jsx("span",{className:"absolute -top-1 -right-1 text-white text-[10px] font-bold rounded-full min-w-[18px] h-4.5 px-1.5 flex items-center justify-center shadow-md",style:{background:"var(--gradient-accent)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-bold)",boxShadow:"var(--shadow-md)"},children:x.badge>9?"9+":x.badge})]}),n.jsx("span",{className:"text-xs font-semibold transition-colors",style:{color:b?"#FF6B6B":"#6B6B6B",fontWeight:b?700:600,fontSize:"11px"},children:x.label}),b&&n.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full",style:{background:"linear-gradient(135deg, #FF6B6B 0%, #A78BFA 100%)"}})]},x.id)})})})]})}function jt(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ee(...e){return t=>{let r=!1;const o=e.map(s=>{const l=jt(s,t);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let s=0;s<o.length;s++){const l=o[s];typeof l=="function"?l():jt(e[s],null)}}}}function G(...e){return a.useCallback(ee(...e),e)}var Qr=Symbol.for("react.lazy"),Me=dt[" use ".trim().toString()];function eo(e){return typeof e=="object"&&e!==null&&"then"in e}function Yt(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Qr&&"_payload"in e&&eo(e._payload)}function qt(e){const t=no(e),r=a.forwardRef((o,s)=>{let{children:l,...c}=o;Yt(l)&&typeof Me=="function"&&(l=Me(l._payload));const i=a.Children.toArray(l),u=i.find(oo);if(u){const d=u.props.children,h=i.map(m=>m===u?a.Children.count(d)>1?a.Children.only(null):a.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...c,ref:s,children:a.isValidElement(d)?a.cloneElement(d,void 0,h):null})}return n.jsx(t,{...c,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}var to=qt("Slot");function no(e){const t=a.forwardRef((r,o)=>{let{children:s,...l}=r;if(Yt(s)&&typeof Me=="function"&&(s=Me(s._payload)),a.isValidElement(s)){const c=ao(s),i=so(l,s.props);return s.type!==a.Fragment&&(i.ref=o?ee(o,c):c),a.cloneElement(s,i)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ro=Symbol("radix.slottable");function oo(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ro}function so(e,t){const r={...t};for(const o in t){const s=e[o],l=t[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...i)=>{const u=l(...i);return s(...i),u}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function ao(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const io=Vr("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function lo({className:e,variant:t,asChild:r=!1,...o}){const s=r?to:"span";return n.jsx(s,{"data-slot":"badge",className:X(io({variant:t}),e),...o})}function co({profile:e,onClose:t,currentUserName:r="You",accessToken:o}){const[s,l]=a.useState("reason"),[c,i]=a.useState(""),[u,d]=a.useState(null),[h,m]=a.useState(!1),[g,x]=a.useState(!1),b=[{value:"friends",label:"ðŸ‘‹ Make Friends",description:"Looking to connect and hang out"},{value:"roommate",label:"ðŸ  Find a Roommate",description:"Searching for someone to live with"},{value:"study",label:"ðŸ“š Study Together",description:"Need a study buddy or group"},{value:"collaborate",label:"ðŸ’¡ Collaborate",description:"Work on projects together"},{value:"network",label:"ðŸ¤ Network",description:"Professional connections"}],f=async y=>{i(y),l("ai-analysis");const j=await p(y);j&&d(j)},p=async y=>{if(!o)return k.error("You must be logged in"),null;x(!0);try{const j=await fetch(`https://${ot}.supabase.co/functions/v1/make-server-2516be19/soft-intro/generate-ai-analysis`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({toUserId:e.id,reason:y.toLowerCase().replace(/\s+/g,"-")})});if(!j.ok){if(j.status===404)throw console.error("Endpoint not found - Edge Function may need to be deployed"),new Error("Service temporarily unavailable. Please try again in a moment.");const R=await j.json().catch(()=>({error:"Unknown error"}));if(console.error("API error response:",R),R.analysis&&R.score){const E=R.score>=85?"Excellent":R.score>=70?"Great":"Good";return{similarities:R.highlights||[],compatibility:E,recommendation:R.analysis,score:R.score}}throw new Error(R.error||"Failed to generate AI analysis")}const N=await j.json();if(!N||!N.analysis&&!N.score)throw console.warn("Invalid response data, using fallback"),new Error("Invalid response format");const C=N.score>=85?"Excellent":N.score>=70?"Great":"Good";return{similarities:N.highlights||[],compatibility:C,recommendation:N.analysis||"You seem like a great match!",score:N.score||75}}catch(j){return console.error("AI analysis error:",j),console.error("Error details:",j.message),j.message?.includes("fallback")||k.error("Using basic compatibility analysis"),{similarities:["Potential for meaningful connection"],compatibility:"Good",recommendation:`You and ${e.name.split(" ")[0]} seem like a great match!`,score:70}}finally{x(!1)}},w=async()=>{if(!o){k.error("You must be logged in to send an intro");return}m(!0);try{if(!(await fetch(`https://${ot}.supabase.co/functions/v1/make-server-2516be19/soft-intro`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({toUserId:e.id,reason:c,analysis:u?{score:u.score,highlights:u.similarities,analysis:u.recommendation}:null})})).ok)throw new Error("Failed to send intro");l("success"),setTimeout(()=>{k.success(`Soft intro sent to ${e.name}!`,{description:"They'll receive a notification and can choose to connect with you."}),t()},2e3)}catch(y){console.error("Error sending intro:",y),k.error("Failed to send intro. Please try again."),m(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center",children:n.jsxs("div",{className:"bg-white w-full sm:max-w-md sm:rounded-2xl rounded-t-3xl flex flex-col",style:{maxHeight:"90dvh",height:"90dvh"},children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between rounded-t-3xl flex-shrink-0 z-10",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ye,{className:"w-5 h-5 text-[#2E7B91]"}),n.jsx("h2",{className:"text-lg",children:"Soft Intro"})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:n.jsx(he,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-h-0",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",paddingBottom:"calc(6rem + env(safe-area-inset-bottom))",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"},children:n.jsxs("div",{className:"p-6 pb-12",children:[s==="reason"&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl mb-2",children:["Why do you want to connect with ",e.name.split(" ")[0],"?"]}),n.jsx("p",{className:"text-sm text-[#475569] mb-6",children:"Our AI will analyze your compatibility and create a personalized introduction."}),n.jsx("div",{className:"space-y-3 pb-4",children:b.map(y=>n.jsx("button",{onClick:()=>f(y.value),className:"w-full text-left p-4 border-2 border-[#EAEAEA] rounded-2xl hover:border-[#2E7B91] hover:bg-[#2E7B9115] active:bg-[#2E7B9120] transition-all touch-manipulation",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium mb-1 text-[#1E4F74]",children:y.label}),n.jsx("p",{className:"text-sm text-[#475569]",children:y.description})]})})},y.value))})]}),s==="ai-analysis"&&n.jsx("div",{className:"space-y-6",children:g?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ye,{className:"w-12 h-12 text-[#2E7B91] mx-auto mb-4 animate-pulse"}),n.jsx("p",{className:"text-lg font-medium text-[#1E4F74] mb-2",children:"Analyzing compatibility..."}),n.jsx("p",{className:"text-sm text-[#475569]",children:"Our AI is finding what makes you a great match!"})]}):u?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 p-4 bg-[#2E7B9115] rounded-2xl",children:[n.jsx(ye,{className:"w-6 h-6 text-[#2E7B91]"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-[#1E4F74]",children:"AI Analysis Complete"}),n.jsx("p",{className:"text-sm text-[#25658A]",children:"Here's what I found..."})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm text-[#64748b] mb-2 font-medium",children:"Compatibility Score"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-1 bg-[#EAEAEA] rounded-full h-3 overflow-hidden",children:n.jsx("div",{className:"bg-gradient-to-r from-[#2E7B91] to-[#B69CFF] h-full rounded-full transition-all duration-1000",style:{width:`${u.score}%`}})}),n.jsxs(lo,{className:"bg-[#2E7B9120] text-[#1E4F74]",children:[u.compatibility," Match (",u.score,"%)"]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm text-[#64748b] mb-3 font-medium",children:"Key Highlights"}),n.jsx("div",{className:"space-y-2",children:u.similarities.map((y,j)=>n.jsxs("div",{className:"flex items-start gap-2 p-3 bg-[#F9F6F3] rounded-2xl",children:[n.jsx("div",{className:"w-2 h-2 bg-[#2E7B91] rounded-full mt-1.5 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-[#1E4F74] leading-relaxed",children:y})]},j))})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-[#2E7B9115] to-[#B69CFF15] rounded-2xl border border-[#2E7B9140]",children:[n.jsxs("h3",{className:"text-sm text-[#1E4F74] mb-2 flex items-center gap-2 font-medium",children:[n.jsx(ye,{className:"w-4 h-4 text-[#2E7B91]"}),"Why You Should Connect"]}),n.jsx("p",{className:"text-sm text-[#1E4F74] leading-relaxed",children:u.recommendation})]}),n.jsxs("div",{className:"flex gap-3 pt-6 pb-4",children:[n.jsx(Y,{variant:"outline",onClick:t,className:"flex-1",children:"Maybe Later"}),n.jsxs(Y,{onClick:w,disabled:h,className:"flex-1 gap-2 bg-gradient-to-r from-[#2E7B91] to-[#25658A] hover:from-[#25658A] hover:to-[#1E4F74] text-white rounded-2xl",children:[n.jsx(vt,{className:"w-4 h-4"}),h?"Sending...":"Send Intro"]})]})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-[#475569] mb-4",children:"Failed to generate analysis. Please try again."}),n.jsx(Y,{onClick:()=>f(c),variant:"outline",children:"Retry"})]})}),s==="success"&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(vt,{className:"w-10 h-10 text-green-600"})}),n.jsx("h3",{className:"text-xl mb-2",children:"Intro Sent! ðŸŽ‰"}),n.jsxs("p",{className:"text-[#475569] mb-4",children:[e.name.split(" ")[0]," will receive a notification about your interest in connecting."]}),n.jsx("p",{className:"text-sm text-[#64748b]",children:"They'll be able to review your profile and decide if they'd like to connect back."})]})]})})]})})}function U(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),r===!1||!s.defaultPrevented)return t?.(s)}}function uo(e,t){const r=a.createContext(t),o=l=>{const{children:c,...i}=l,u=a.useMemo(()=>i,Object.values(i));return n.jsx(r.Provider,{value:u,children:c})};o.displayName=e+"Provider";function s(l){const c=a.useContext(r);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}return[o,s]}function fo(e,t=[]){let r=[];function o(l,c){const i=a.createContext(c),u=r.length;r=[...r,c];const d=m=>{const{scope:g,children:x,...b}=m,f=g?.[e]?.[u]||i,p=a.useMemo(()=>b,Object.values(b));return n.jsx(f.Provider,{value:p,children:x})};d.displayName=l+"Provider";function h(m,g){const x=g?.[e]?.[u]||i,b=a.useContext(x);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[d,h]}const s=()=>{const l=r.map(c=>a.createContext(c));return function(i){const u=i?.[e]||l;return a.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return s.scopeName=e,[o,mo(s,...t)]}function mo(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=o.reduce((i,{useScope:u,scopeName:d})=>{const m=u(l)[`__scope${d}`];return{...i,...m}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}var fe=globalThis?.document?a.useLayoutEffect:()=>{},ho=dt[" useId ".trim().toString()]||(()=>{}),po=0;function Re(e){const[t,r]=a.useState(ho());return fe(()=>{r(o=>o??String(po++))},[e]),e||(t?`radix-${t}`:"")}var xo=dt[" useInsertionEffect ".trim().toString()]||fe;function ut({prop:e,defaultProp:t,onChange:r=()=>{},caller:o}){const[s,l,c]=go({defaultProp:t,onChange:r}),i=e!==void 0,u=i?e:s;{const h=a.useRef(e!==void 0);a.useEffect(()=>{const m=h.current;m!==i&&console.warn(`${o} is changing from ${m?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=i},[i,o])}const d=a.useCallback(h=>{if(i){const m=bo(h)?h(e):h;m!==e&&c.current?.(m)}else l(h)},[i,e,l,c]);return[u,d]}function go({defaultProp:e,onChange:t}){const[r,o]=a.useState(e),s=a.useRef(r),l=a.useRef(t);return xo(()=>{l.current=t},[t]),a.useEffect(()=>{s.current!==r&&(l.current?.(r),s.current=r)},[r,s]),[r,o,l]}function bo(e){return typeof e=="function"}function yo(e){const t=vo(e),r=a.forwardRef((o,s)=>{const{children:l,...c}=o,i=a.Children.toArray(l),u=i.find(jo);if(u){const d=u.props.children,h=i.map(m=>m===u?a.Children.count(d)>1?a.Children.only(null):a.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...c,ref:s,children:a.isValidElement(d)?a.cloneElement(d,void 0,h):null})}return n.jsx(t,{...c,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function vo(e){const t=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const c=No(s),i=So(l,s.props);return s.type!==a.Fragment&&(i.ref=o?ee(o,c):c),a.cloneElement(s,i)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wo=Symbol("radix.slottable");function jo(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wo}function So(e,t){const r={...t};for(const o in t){const s=e[o],l=t[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...i)=>{const u=l(...i);return s(...i),u}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function No(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Co=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xt=Co.reduce((e,t)=>{const r=yo(`Primitive.${t}`),o=a.forwardRef((s,l)=>{const{asChild:c,...i}=s,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...i,ref:l})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function Eo(e,t){e&&Lr.flushSync(()=>e.dispatchEvent(t))}function me(e){const t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...r)=>t.current?.(...r),[])}function ko(e,t=globalThis?.document){const r=me(e);a.useEffect(()=>{const o=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",o,{capture:!0}),()=>t.removeEventListener("keydown",o,{capture:!0})},[r,t])}var Fo="DismissableLayer",at="dismissableLayer.update",Po="dismissableLayer.pointerDownOutside",Ro="dismissableLayer.focusOutside",St,Kt=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zt=a.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:c,onDismiss:i,...u}=e,d=a.useContext(Kt),[h,m]=a.useState(null),g=h?.ownerDocument??globalThis?.document,[,x]=a.useState({}),b=G(t,E=>m(E)),f=Array.from(d.layers),[p]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=f.indexOf(p),y=h?f.indexOf(h):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,N=y>=w,C=Io(E=>{const v=E.target,B=[...d.branches].some(P=>P.contains(v));!N||B||(s?.(E),c?.(E),E.defaultPrevented||i?.())},g),R=Ao(E=>{const v=E.target;[...d.branches].some(P=>P.contains(v))||(l?.(E),c?.(E),E.defaultPrevented||i?.())},g);return ko(E=>{y===d.layers.size-1&&(o?.(E),!E.defaultPrevented&&i&&(E.preventDefault(),i()))},g),a.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(St=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Nt(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=St)}},[h,g,r,d]),a.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Nt())},[h,d]),a.useEffect(()=>{const E=()=>x({});return document.addEventListener(at,E),()=>document.removeEventListener(at,E)},[]),n.jsx(Xt.div,{...u,ref:b,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:U(e.onFocusCapture,R.onFocusCapture),onBlurCapture:U(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:U(e.onPointerDownCapture,C.onPointerDownCapture)})});Zt.displayName=Fo;var Bo="DismissableLayerBranch",Do=a.forwardRef((e,t)=>{const r=a.useContext(Kt),o=a.useRef(null),s=G(t,o);return a.useEffect(()=>{const l=o.current;if(l)return r.branches.add(l),()=>{r.branches.delete(l)}},[r.branches]),n.jsx(Xt.div,{...e,ref:s})});Do.displayName=Bo;function Io(e,t=globalThis?.document){const r=me(e),o=a.useRef(!1),s=a.useRef(()=>{});return a.useEffect(()=>{const l=i=>{if(i.target&&!o.current){let u=function(){Jt(Po,r,d,{discrete:!0})};const d={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);o.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",l),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>o.current=!0}}function Ao(e,t=globalThis?.document){const r=me(e),o=a.useRef(!1);return a.useEffect(()=>{const s=l=>{l.target&&!o.current&&Jt(Ro,r,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function Nt(){const e=new CustomEvent(at);document.dispatchEvent(e)}function Jt(e,t,r,{discrete:o}){const s=r.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),o?Eo(s,l):s.dispatchEvent(l)}function _o(e){const t=To(e),r=a.forwardRef((o,s)=>{const{children:l,...c}=o,i=a.Children.toArray(l),u=i.find(Oo);if(u){const d=u.props.children,h=i.map(m=>m===u?a.Children.count(d)>1?a.Children.only(null):a.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...c,ref:s,children:a.isValidElement(d)?a.cloneElement(d,void 0,h):null})}return n.jsx(t,{...c,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function To(e){const t=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const c=Wo(s),i=$o(l,s.props);return s.type!==a.Fragment&&(i.ref=o?ee(o,c):c),a.cloneElement(s,i)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Mo=Symbol("radix.slottable");function Oo(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Mo}function $o(e,t){const r={...t};for(const o in t){const s=e[o],l=t[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...i)=>{const u=l(...i);return s(...i),u}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function Wo(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var zo=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Lo=zo.reduce((e,t)=>{const r=_o(`Primitive.${t}`),o=a.forwardRef((s,l)=>{const{asChild:c,...i}=s,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...i,ref:l})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Ye="focusScope.autoFocusOnMount",qe="focusScope.autoFocusOnUnmount",Ct={bubbles:!1,cancelable:!0},Uo="FocusScope",Qt=a.forwardRef((e,t)=>{const{loop:r=!1,trapped:o=!1,onMountAutoFocus:s,onUnmountAutoFocus:l,...c}=e,[i,u]=a.useState(null),d=me(s),h=me(l),m=a.useRef(null),g=G(t,f=>u(f)),x=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(o){let f=function(j){if(x.paused||!i)return;const N=j.target;i.contains(N)?m.current=N:te(m.current,{select:!0})},p=function(j){if(x.paused||!i)return;const N=j.relatedTarget;N!==null&&(i.contains(N)||te(m.current,{select:!0}))},w=function(j){if(document.activeElement===document.body)for(const C of j)C.removedNodes.length>0&&te(i)};document.addEventListener("focusin",f),document.addEventListener("focusout",p);const y=new MutationObserver(w);return i&&y.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",p),y.disconnect()}}},[o,i,x.paused]),a.useEffect(()=>{if(i){kt.add(x);const f=document.activeElement;if(!i.contains(f)){const w=new CustomEvent(Ye,Ct);i.addEventListener(Ye,d),i.dispatchEvent(w),w.defaultPrevented||(Vo(Xo(en(i)),{select:!0}),document.activeElement===f&&te(i))}return()=>{i.removeEventListener(Ye,d),setTimeout(()=>{const w=new CustomEvent(qe,Ct);i.addEventListener(qe,h),i.dispatchEvent(w),w.defaultPrevented||te(f??document.body,{select:!0}),i.removeEventListener(qe,h),kt.remove(x)},0)}}},[i,d,h,x]);const b=a.useCallback(f=>{if(!r&&!o||x.paused)return;const p=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,w=document.activeElement;if(p&&w){const y=f.currentTarget,[j,N]=Ho(y);j&&N?!f.shiftKey&&w===N?(f.preventDefault(),r&&te(j,{select:!0})):f.shiftKey&&w===j&&(f.preventDefault(),r&&te(N,{select:!0})):w===y&&f.preventDefault()}},[r,o,x.paused]);return n.jsx(Lo.div,{tabIndex:-1,...c,ref:g,onKeyDown:b})});Qt.displayName=Uo;function Vo(e,{select:t=!1}={}){const r=document.activeElement;for(const o of e)if(te(o,{select:t}),document.activeElement!==r)return}function Ho(e){const t=en(e),r=Et(t,e),o=Et(t.reverse(),e);return[r,o]}function en(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const s=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||s?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Et(e,t){for(const r of e)if(!Go(r,{upTo:t}))return r}function Go(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Yo(e){return e instanceof HTMLInputElement&&"select"in e}function te(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Yo(e)&&t&&e.select()}}var kt=qo();function qo(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=Ft(e,t),e.unshift(t)},remove(t){e=Ft(e,t),e[0]?.resume()}}}function Ft(e,t){const r=[...e],o=r.indexOf(t);return o!==-1&&r.splice(o,1),r}function Xo(e){return e.filter(t=>t.tagName!=="A")}function Ko(e){const t=Zo(e),r=a.forwardRef((o,s)=>{const{children:l,...c}=o,i=a.Children.toArray(l),u=i.find(Qo);if(u){const d=u.props.children,h=i.map(m=>m===u?a.Children.count(d)>1?a.Children.only(null):a.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...c,ref:s,children:a.isValidElement(d)?a.cloneElement(d,void 0,h):null})}return n.jsx(t,{...c,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function Zo(e){const t=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const c=ts(s),i=es(l,s.props);return s.type!==a.Fragment&&(i.ref=o?ee(o,c):c),a.cloneElement(s,i)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Jo=Symbol("radix.slottable");function Qo(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Jo}function es(e,t){const r={...t};for(const o in t){const s=e[o],l=t[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...i)=>{const u=l(...i);return s(...i),u}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function ts(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ns=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rs=ns.reduce((e,t)=>{const r=Ko(`Primitive.${t}`),o=a.forwardRef((s,l)=>{const{asChild:c,...i}=s,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...i,ref:l})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),os="Portal",tn=a.forwardRef((e,t)=>{const{container:r,...o}=e,[s,l]=a.useState(!1);fe(()=>l(!0),[]);const c=r||s&&globalThis?.document?.body;return c?Ur.createPortal(n.jsx(rs.div,{...o,ref:t}),c):null});tn.displayName=os;function ss(e,t){return a.useReducer((r,o)=>t[r][o]??r,e)}var we=e=>{const{present:t,children:r}=e,o=as(t),s=typeof r=="function"?r({present:o.isPresent}):a.Children.only(r),l=G(o.ref,is(s));return typeof r=="function"||o.isPresent?a.cloneElement(s,{ref:l}):null};we.displayName="Presence";function as(e){const[t,r]=a.useState(),o=a.useRef(null),s=a.useRef(e),l=a.useRef("none"),c=e?"mounted":"unmounted",[i,u]=ss(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const d=Ne(o.current);l.current=i==="mounted"?d:"none"},[i]),fe(()=>{const d=o.current,h=s.current;if(h!==e){const g=l.current,x=Ne(d);e?u("MOUNT"):x==="none"||d?.display==="none"?u("UNMOUNT"):u(h&&g!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),fe(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,m=x=>{const f=Ne(o.current).includes(CSS.escape(x.animationName));if(x.target===t&&f&&(u("ANIMATION_END"),!s.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},g=x=>{x.target===t&&(l.current=Ne(o.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:a.useCallback(d=>{o.current=d?getComputedStyle(d):null,r(d)},[])}}function Ne(e){return e?.animationName||"none"}function is(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function nn(e){const t=ls(e),r=a.forwardRef((o,s)=>{const{children:l,...c}=o,i=a.Children.toArray(l),u=i.find(ds);if(u){const d=u.props.children,h=i.map(m=>m===u?a.Children.count(d)>1?a.Children.only(null):a.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...c,ref:s,children:a.isValidElement(d)?a.cloneElement(d,void 0,h):null})}return n.jsx(t,{...c,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function ls(e){const t=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const c=fs(s),i=us(l,s.props);return s.type!==a.Fragment&&(i.ref=o?ee(o,c):c),a.cloneElement(s,i)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var cs=Symbol("radix.slottable");function ds(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cs}function us(e,t){const r={...t};for(const o in t){const s=e[o],l=t[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...i)=>{const u=l(...i);return s(...i),u}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function fs(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ms=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=ms.reduce((e,t)=>{const r=nn(`Primitive.${t}`),o=a.forwardRef((s,l)=>{const{asChild:c,...i}=s,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...i,ref:l})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Xe=0;function hs(){a.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Pt()),document.body.insertAdjacentElement("beforeend",e[1]??Pt()),Xe++,()=>{Xe===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Xe--}},[])}function Pt(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Be="right-scroll-bar-position",De="width-before-scroll-bar",ps="with-scroll-bars-hidden",xs="--removed-body-scroll-bar-size";function Ke(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function gs(e,t){var r=a.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(o){var s=r.value;s!==o&&(r.value=o,r.callback(o,s))}}}})[0];return r.callback=t,r.facade}var bs=typeof window<"u"?a.useLayoutEffect:a.useEffect,Rt=new WeakMap;function ys(e,t){var r=gs(null,function(o){return e.forEach(function(s){return Ke(s,o)})});return bs(function(){var o=Rt.get(r);if(o){var s=new Set(o),l=new Set(e),c=r.current;s.forEach(function(i){l.has(i)||Ke(i,null)}),l.forEach(function(i){s.has(i)||Ke(i,c)})}Rt.set(r,e)},[e]),r}function vs(e){return e}function ws(e,t){t===void 0&&(t=vs);var r=[],o=!1,s={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(l){var c=t(l,o);return r.push(c),function(){r=r.filter(function(i){return i!==c})}},assignSyncMedium:function(l){for(o=!0;r.length;){var c=r;r=[],c.forEach(l)}r={push:function(i){return l(i)},filter:function(){return r}}},assignMedium:function(l){o=!0;var c=[];if(r.length){var i=r;r=[],i.forEach(l),c=r}var u=function(){var h=c;c=[],h.forEach(l)},d=function(){return Promise.resolve().then(u)};d(),r={push:function(h){c.push(h),d()},filter:function(h){return c=c.filter(h),r}}}};return s}function js(e){e===void 0&&(e={});var t=ws(null);return t.options=ne({async:!0,ssr:!1},e),t}var rn=function(e){var t=e.sideCar,r=Gt(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return a.createElement(o,ne({},r))};rn.isSideCarExport=!0;function Ss(e,t){return e.useMedium(t),rn}var on=js(),Ze=function(){},Ue=a.forwardRef(function(e,t){var r=a.useRef(null),o=a.useState({onScrollCapture:Ze,onWheelCapture:Ze,onTouchMoveCapture:Ze}),s=o[0],l=o[1],c=e.forwardProps,i=e.children,u=e.className,d=e.removeScrollBar,h=e.enabled,m=e.shards,g=e.sideCar,x=e.noRelative,b=e.noIsolation,f=e.inert,p=e.allowPinchZoom,w=e.as,y=w===void 0?"div":w,j=e.gapMode,N=Gt(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=g,R=ys([r,t]),E=ne(ne({},N),s);return a.createElement(a.Fragment,null,h&&a.createElement(C,{sideCar:on,removeScrollBar:d,shards:m,noRelative:x,noIsolation:b,inert:f,setCallbacks:l,allowPinchZoom:!!p,lockRef:r,gapMode:j}),c?a.cloneElement(a.Children.only(i),ne(ne({},E),{ref:R})):a.createElement(y,ne({},E,{className:u,ref:R}),i))});Ue.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ue.classNames={fullWidth:De,zeroRight:Be};var Ns=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cs(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ns();return t&&e.setAttribute("nonce",t),e}function Es(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ks(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Fs=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Cs())&&(Es(t,r),ks(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ps=function(){var e=Fs();return function(t,r){a.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},sn=function(){var e=Ps(),t=function(r){var o=r.styles,s=r.dynamic;return e(o,s),null};return t},Rs={left:0,top:0,right:0,gap:0},Je=function(e){return parseInt(e||"",10)||0},Bs=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],o=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Je(r),Je(o),Je(s)]},Ds=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Rs;var t=Bs(e),r=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-r+t[2]-t[0])}},Is=sn(),ue="data-scroll-locked",As=function(e,t,r,o){var s=e.left,l=e.top,c=e.right,i=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(ps,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(i,"px ").concat(o,`;
  }
  body[`).concat(ue,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(o,`;
    `),r==="padding"&&"padding-right: ".concat(i,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Be,` {
    right: `).concat(i,"px ").concat(o,`;
  }
  
  .`).concat(De,` {
    margin-right: `).concat(i,"px ").concat(o,`;
  }
  
  .`).concat(Be," .").concat(Be,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(De," .").concat(De,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(ue,`] {
    `).concat(xs,": ").concat(i,`px;
  }
`)},Bt=function(){var e=parseInt(document.body.getAttribute(ue)||"0",10);return isFinite(e)?e:0},_s=function(){a.useEffect(function(){return document.body.setAttribute(ue,(Bt()+1).toString()),function(){var e=Bt()-1;e<=0?document.body.removeAttribute(ue):document.body.setAttribute(ue,e.toString())}},[])},Ts=function(e){var t=e.noRelative,r=e.noImportant,o=e.gapMode,s=o===void 0?"margin":o;_s();var l=a.useMemo(function(){return Ds(s)},[s]);return a.createElement(Is,{styles:As(l,!t,s,r?"":"!important")})},it=!1;if(typeof window<"u")try{var Ce=Object.defineProperty({},"passive",{get:function(){return it=!0,!0}});window.addEventListener("test",Ce,Ce),window.removeEventListener("test",Ce,Ce)}catch{it=!1}var le=it?{passive:!1}:!1,Ms=function(e){return e.tagName==="TEXTAREA"},an=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Ms(e)&&r[t]==="visible")},Os=function(e){return an(e,"overflowY")},$s=function(e){return an(e,"overflowX")},Dt=function(e,t){var r=t.ownerDocument,o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var s=ln(e,o);if(s){var l=cn(e,o),c=l[1],i=l[2];if(c>i)return!0}o=o.parentNode}while(o&&o!==r.body);return!1},Ws=function(e){var t=e.scrollTop,r=e.scrollHeight,o=e.clientHeight;return[t,r,o]},zs=function(e){var t=e.scrollLeft,r=e.scrollWidth,o=e.clientWidth;return[t,r,o]},ln=function(e,t){return e==="v"?Os(t):$s(t)},cn=function(e,t){return e==="v"?Ws(t):zs(t)},Ls=function(e,t){return e==="h"&&t==="rtl"?-1:1},Us=function(e,t,r,o,s){var l=Ls(e,window.getComputedStyle(t).direction),c=l*o,i=r.target,u=t.contains(i),d=!1,h=c>0,m=0,g=0;do{if(!i)break;var x=cn(e,i),b=x[0],f=x[1],p=x[2],w=f-p-l*b;(b||w)&&ln(e,i)&&(m+=w,g+=b);var y=i.parentNode;i=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&i!==document.body||u&&(t.contains(i)||t===i));return(h&&Math.abs(m)<1||!h&&Math.abs(g)<1)&&(d=!0),d},Ee=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},It=function(e){return[e.deltaX,e.deltaY]},At=function(e){return e&&"current"in e?e.current:e},Vs=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Hs=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Gs=0,ce=[];function Ys(e){var t=a.useRef([]),r=a.useRef([0,0]),o=a.useRef(),s=a.useState(Gs++)[0],l=a.useState(sn)[0],c=a.useRef(e);a.useEffect(function(){c.current=e},[e]),a.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var f=Xr([e.lockRef.current],(e.shards||[]).map(At),!0).filter(Boolean);return f.forEach(function(p){return p.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),f.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=a.useCallback(function(f,p){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!c.current.allowPinchZoom;var w=Ee(f),y=r.current,j="deltaX"in f?f.deltaX:y[0]-w[0],N="deltaY"in f?f.deltaY:y[1]-w[1],C,R=f.target,E=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in f&&E==="h"&&R.type==="range")return!1;var v=Dt(E,R);if(!v)return!0;if(v?C=E:(C=E==="v"?"h":"v",v=Dt(E,R)),!v)return!1;if(!o.current&&"changedTouches"in f&&(j||N)&&(o.current=C),!C)return!0;var B=o.current||C;return Us(B,p,f,B==="h"?j:N)},[]),u=a.useCallback(function(f){var p=f;if(!(!ce.length||ce[ce.length-1]!==l)){var w="deltaY"in p?It(p):Ee(p),y=t.current.filter(function(C){return C.name===p.type&&(C.target===p.target||p.target===C.shadowParent)&&Vs(C.delta,w)})[0];if(y&&y.should){p.cancelable&&p.preventDefault();return}if(!y){var j=(c.current.shards||[]).map(At).filter(Boolean).filter(function(C){return C.contains(p.target)}),N=j.length>0?i(p,j[0]):!c.current.noIsolation;N&&p.cancelable&&p.preventDefault()}}},[]),d=a.useCallback(function(f,p,w,y){var j={name:f,delta:p,target:w,should:y,shadowParent:qs(w)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(N){return N!==j})},1)},[]),h=a.useCallback(function(f){r.current=Ee(f),o.current=void 0},[]),m=a.useCallback(function(f){d(f.type,It(f),f.target,i(f,e.lockRef.current))},[]),g=a.useCallback(function(f){d(f.type,Ee(f),f.target,i(f,e.lockRef.current))},[]);a.useEffect(function(){return ce.push(l),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",u,le),document.addEventListener("touchmove",u,le),document.addEventListener("touchstart",h,le),function(){ce=ce.filter(function(f){return f!==l}),document.removeEventListener("wheel",u,le),document.removeEventListener("touchmove",u,le),document.removeEventListener("touchstart",h,le)}},[]);var x=e.removeScrollBar,b=e.inert;return a.createElement(a.Fragment,null,b?a.createElement(l,{styles:Hs(s)}):null,x?a.createElement(Ts,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function qs(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Xs=Ss(on,Ys);var dn=a.forwardRef(function(e,t){return a.createElement(Ue,ne({},e,{ref:t,sideCar:Xs}))});dn.classNames=Ue.classNames;var Ks=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},de=new WeakMap,ke=new WeakMap,Fe={},Qe=0,un=function(e){return e&&(e.host||un(e.parentNode))},Zs=function(e,t){return t.map(function(r){if(e.contains(r))return r;var o=un(r);return o&&e.contains(o)?o:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Js=function(e,t,r,o){var s=Zs(t,Array.isArray(e)?e:[e]);Fe[r]||(Fe[r]=new WeakMap);var l=Fe[r],c=[],i=new Set,u=new Set(s),d=function(m){!m||i.has(m)||(i.add(m),d(m.parentNode))};s.forEach(d);var h=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(g){if(i.has(g))h(g);else try{var x=g.getAttribute(o),b=x!==null&&x!=="false",f=(de.get(g)||0)+1,p=(l.get(g)||0)+1;de.set(g,f),l.set(g,p),c.push(g),f===1&&b&&ke.set(g,!0),p===1&&g.setAttribute(r,"true"),b||g.setAttribute(o,"true")}catch(w){console.error("aria-hidden: cannot operate on ",g,w)}})};return h(t),i.clear(),Qe++,function(){c.forEach(function(m){var g=de.get(m)-1,x=l.get(m)-1;de.set(m,g),l.set(m,x),g||(ke.has(m)||m.removeAttribute(o),ke.delete(m)),x||m.removeAttribute(r)}),Qe--,Qe||(de=new WeakMap,de=new WeakMap,ke=new WeakMap,Fe={})}},Qs=function(e,t,r){r===void 0&&(r="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),s=Ks(e);return s?(o.push.apply(o,Array.from(s.querySelectorAll("[aria-live], script"))),Js(o,s,r,"aria-hidden")):function(){return null}},Ve="Dialog",[fn]=fo(Ve),[ea,K]=fn(Ve),mn=e=>{const{__scopeDialog:t,children:r,open:o,defaultOpen:s,onOpenChange:l,modal:c=!0}=e,i=a.useRef(null),u=a.useRef(null),[d,h]=ut({prop:o,defaultProp:s??!1,onChange:l,caller:Ve});return n.jsx(ea,{scope:t,triggerRef:i,contentRef:u,contentId:Re(),titleId:Re(),descriptionId:Re(),open:d,onOpenChange:h,onOpenToggle:a.useCallback(()=>h(m=>!m),[h]),modal:c,children:r})};mn.displayName=Ve;var hn="DialogTrigger",ta=a.forwardRef((e,t)=>{const{__scopeDialog:r,...o}=e,s=K(hn,r),l=G(t,s.triggerRef);return n.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ht(s.open),...o,ref:l,onClick:U(e.onClick,s.onOpenToggle)})});ta.displayName=hn;var ft="DialogPortal",[na,pn]=fn(ft,{forceMount:void 0}),xn=e=>{const{__scopeDialog:t,forceMount:r,children:o,container:s}=e,l=K(ft,t);return n.jsx(na,{scope:t,forceMount:r,children:a.Children.map(o,c=>n.jsx(we,{present:r||l.open,children:n.jsx(tn,{asChild:!0,container:s,children:c})}))})};xn.displayName=ft;var Oe="DialogOverlay",gn=a.forwardRef((e,t)=>{const r=pn(Oe,e.__scopeDialog),{forceMount:o=r.forceMount,...s}=e,l=K(Oe,e.__scopeDialog);return l.modal?n.jsx(we,{present:o||l.open,children:n.jsx(oa,{...s,ref:t})}):null});gn.displayName=Oe;var ra=nn("DialogOverlay.RemoveScroll"),oa=a.forwardRef((e,t)=>{const{__scopeDialog:r,...o}=e,s=K(Oe,r);return n.jsx(dn,{as:ra,allowPinchZoom:!0,shards:[s.contentRef],children:n.jsx(je.div,{"data-state":ht(s.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),se="DialogContent",bn=a.forwardRef((e,t)=>{const r=pn(se,e.__scopeDialog),{forceMount:o=r.forceMount,...s}=e,l=K(se,e.__scopeDialog);return n.jsx(we,{present:o||l.open,children:l.modal?n.jsx(sa,{...s,ref:t}):n.jsx(aa,{...s,ref:t})})});bn.displayName=se;var sa=a.forwardRef((e,t)=>{const r=K(se,e.__scopeDialog),o=a.useRef(null),s=G(t,r.contentRef,o);return a.useEffect(()=>{const l=o.current;if(l)return Qs(l)},[]),n.jsx(yn,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:U(e.onCloseAutoFocus,l=>{l.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:U(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&l.preventDefault()}),onFocusOutside:U(e.onFocusOutside,l=>l.preventDefault())})}),aa=a.forwardRef((e,t)=>{const r=K(se,e.__scopeDialog),o=a.useRef(!1),s=a.useRef(!1);return n.jsx(yn,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(o.current||r.triggerRef.current?.focus(),l.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(o.current=!0,l.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=l.target;r.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&s.current&&l.preventDefault()}})}),yn=a.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:l,...c}=e,i=K(se,r),u=a.useRef(null),d=G(t,u);return hs(),n.jsxs(n.Fragment,{children:[n.jsx(Qt,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:l,children:n.jsx(Zt,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":ht(i.open),...c,ref:d,onDismiss:()=>i.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(ia,{titleId:i.titleId}),n.jsx(ca,{contentRef:u,descriptionId:i.descriptionId})]})]})}),mt="DialogTitle",vn=a.forwardRef((e,t)=>{const{__scopeDialog:r,...o}=e,s=K(mt,r);return n.jsx(je.h2,{id:s.titleId,...o,ref:t})});vn.displayName=mt;var wn="DialogDescription",jn=a.forwardRef((e,t)=>{const{__scopeDialog:r,...o}=e,s=K(wn,r);return n.jsx(je.p,{id:s.descriptionId,...o,ref:t})});jn.displayName=wn;var Sn="DialogClose",Nn=a.forwardRef((e,t)=>{const{__scopeDialog:r,...o}=e,s=K(Sn,r);return n.jsx(je.button,{type:"button",...o,ref:t,onClick:U(e.onClick,()=>s.onOpenChange(!1))})});Nn.displayName=Sn;function ht(e){return e?"open":"closed"}var Cn="DialogTitleWarning",[Hl,En]=uo(Cn,{contentName:se,titleName:mt,docsSlug:"dialog"}),ia=({titleId:e})=>{const t=En(Cn),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},la="DialogDescriptionWarning",ca=({contentRef:e,descriptionId:t})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${En(la).contentName}}.`;return a.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(o))},[o,e,t]),null},da=mn,ua=xn,kn=gn,Fn=bn,Pn=vn,Rn=jn,fa=Nn;const ma=da,ha=ua,Bn=a.forwardRef(({className:e,...t},r)=>n.jsx(kn,{ref:r,className:X("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Bn.displayName=kn.displayName;const Dn=a.forwardRef(({className:e,children:t,...r},o)=>n.jsxs(ha,{children:[n.jsx(Bn,{}),n.jsxs(Fn,{ref:o,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(fa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(he,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Dn.displayName=Fn.displayName;const In=({className:e,...t})=>n.jsx("div",{className:X("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});In.displayName="DialogHeader";const An=a.forwardRef(({className:e,...t},r)=>n.jsx(Pn,{ref:r,className:X("text-lg font-semibold leading-none tracking-tight",e),...t}));An.displayName=Pn.displayName;const _n=a.forwardRef(({className:e,...t},r)=>n.jsx(Rn,{ref:r,className:X("text-sm text-muted-foreground",e),...t}));_n.displayName=Rn.displayName;function pa({className:e,...t}){return n.jsx("textarea",{"data-slot":"textarea",className:X("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const oe=a.forwardRef(({className:e,...t},r)=>n.jsx("label",{ref:r,className:X("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));oe.displayName="Label";function Tn(e,t=[]){let r=[];function o(l,c){const i=a.createContext(c),u=r.length;r=[...r,c];const d=m=>{const{scope:g,children:x,...b}=m,f=g?.[e]?.[u]||i,p=a.useMemo(()=>b,Object.values(b));return n.jsx(f.Provider,{value:p,children:x})};d.displayName=l+"Provider";function h(m,g){const x=g?.[e]?.[u]||i,b=a.useContext(x);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[d,h]}const s=()=>{const l=r.map(c=>a.createContext(c));return function(i){const u=i?.[e]||l;return a.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return s.scopeName=e,[o,xa(s,...t)]}function xa(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=o.reduce((i,{useScope:u,scopeName:d})=>{const m=u(l)[`__scope${d}`];return{...i,...m}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function ga(e){const t=ba(e),r=a.forwardRef((o,s)=>{const{children:l,...c}=o,i=a.Children.toArray(l),u=i.find(va);if(u){const d=u.props.children,h=i.map(m=>m===u?a.Children.count(d)>1?a.Children.only(null):a.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...c,ref:s,children:a.isValidElement(d)?a.cloneElement(d,void 0,h):null})}return n.jsx(t,{...c,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function ba(e){const t=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const c=ja(s),i=wa(l,s.props);return s.type!==a.Fragment&&(i.ref=o?ee(o,c):c),a.cloneElement(s,i)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ya=Symbol("radix.slottable");function va(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ya}function wa(e,t){const r={...t};for(const o in t){const s=e[o],l=t[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...i)=>{const u=l(...i);return s(...i),u}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function ja(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Sa=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],He=Sa.reduce((e,t)=>{const r=ga(`Primitive.${t}`),o=a.forwardRef((s,l)=>{const{asChild:c,...i}=s,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...i,ref:l})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function Na(e,t=[]){let r=[];function o(l,c){const i=a.createContext(c),u=r.length;r=[...r,c];const d=m=>{const{scope:g,children:x,...b}=m,f=g?.[e]?.[u]||i,p=a.useMemo(()=>b,Object.values(b));return n.jsx(f.Provider,{value:p,children:x})};d.displayName=l+"Provider";function h(m,g){const x=g?.[e]?.[u]||i,b=a.useContext(x);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[d,h]}const s=()=>{const l=r.map(c=>a.createContext(c));return function(i){const u=i?.[e]||l;return a.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return s.scopeName=e,[o,Ca(s,...t)]}function Ca(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=o.reduce((i,{useScope:u,scopeName:d})=>{const m=u(l)[`__scope${d}`];return{...i,...m}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function _t(e){const t=Ea(e),r=a.forwardRef((o,s)=>{const{children:l,...c}=o,i=a.Children.toArray(l),u=i.find(Fa);if(u){const d=u.props.children,h=i.map(m=>m===u?a.Children.count(d)>1?a.Children.only(null):a.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...c,ref:s,children:a.isValidElement(d)?a.cloneElement(d,void 0,h):null})}return n.jsx(t,{...c,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function Ea(e){const t=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const c=Ra(s),i=Pa(l,s.props);return s.type!==a.Fragment&&(i.ref=o?ee(o,c):c),a.cloneElement(s,i)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ka=Symbol("radix.slottable");function Fa(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ka}function Pa(e,t){const r={...t};for(const o in t){const s=e[o],l=t[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...i)=>{const u=l(...i);return s(...i),u}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function Ra(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ba(e){const t=e+"CollectionProvider",[r,o]=Na(t),[s,l]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=f=>{const{scope:p,children:w}=f,y=re.useRef(null),j=re.useRef(new Map).current;return n.jsx(s,{scope:p,itemMap:j,collectionRef:y,children:w})};c.displayName=t;const i=e+"CollectionSlot",u=_t(i),d=re.forwardRef((f,p)=>{const{scope:w,children:y}=f,j=l(i,w),N=G(p,j.collectionRef);return n.jsx(u,{ref:N,children:y})});d.displayName=i;const h=e+"CollectionItemSlot",m="data-radix-collection-item",g=_t(h),x=re.forwardRef((f,p)=>{const{scope:w,children:y,...j}=f,N=re.useRef(null),C=G(p,N),R=l(h,w);return re.useEffect(()=>(R.itemMap.set(N,{ref:N,...j}),()=>void R.itemMap.delete(N))),n.jsx(g,{[m]:"",ref:C,children:y})});x.displayName=h;function b(f){const p=l(e+"CollectionConsumer",f);return re.useCallback(()=>{const y=p.collectionRef.current;if(!y)return[];const j=Array.from(y.querySelectorAll(`[${m}]`));return Array.from(p.itemMap.values()).sort((R,E)=>j.indexOf(R.ref.current)-j.indexOf(E.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:c,Slot:d,ItemSlot:x},b,o]}function Da(e,t=[]){let r=[];function o(l,c){const i=a.createContext(c),u=r.length;r=[...r,c];const d=m=>{const{scope:g,children:x,...b}=m,f=g?.[e]?.[u]||i,p=a.useMemo(()=>b,Object.values(b));return n.jsx(f.Provider,{value:p,children:x})};d.displayName=l+"Provider";function h(m,g){const x=g?.[e]?.[u]||i,b=a.useContext(x);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[d,h]}const s=()=>{const l=r.map(c=>a.createContext(c));return function(i){const u=i?.[e]||l;return a.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return s.scopeName=e,[o,Ia(s,...t)]}function Ia(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=o.reduce((i,{useScope:u,scopeName:d})=>{const m=u(l)[`__scope${d}`];return{...i,...m}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function Aa(e){const t=_a(e),r=a.forwardRef((o,s)=>{const{children:l,...c}=o,i=a.Children.toArray(l),u=i.find(Ma);if(u){const d=u.props.children,h=i.map(m=>m===u?a.Children.count(d)>1?a.Children.only(null):a.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...c,ref:s,children:a.isValidElement(d)?a.cloneElement(d,void 0,h):null})}return n.jsx(t,{...c,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function _a(e){const t=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const c=$a(s),i=Oa(l,s.props);return s.type!==a.Fragment&&(i.ref=o?ee(o,c):c),a.cloneElement(s,i)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ta=Symbol("radix.slottable");function Ma(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ta}function Oa(e,t){const r={...t};for(const o in t){const s=e[o],l=t[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...i)=>{const u=l(...i);return s(...i),u}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function $a(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Wa=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mn=Wa.reduce((e,t)=>{const r=Aa(`Primitive.${t}`),o=a.forwardRef((s,l)=>{const{asChild:c,...i}=s,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...i,ref:l})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),za=a.createContext(void 0);function On(e){const t=a.useContext(za);return e||t||"ltr"}var et="rovingFocusGroup.onEntryFocus",La={bubbles:!1,cancelable:!0},Se="RovingFocusGroup",[lt,$n,Ua]=Ba(Se),[Va,Wn]=Da(Se,[Ua]),[Ha,Ga]=Va(Se),zn=a.forwardRef((e,t)=>n.jsx(lt.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(lt.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Ya,{...e,ref:t})})}));zn.displayName=Se;var Ya=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:s=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...m}=e,g=a.useRef(null),x=G(t,g),b=On(l),[f,p]=ut({prop:c,defaultProp:i??null,onChange:u,caller:Se}),[w,y]=a.useState(!1),j=me(d),N=$n(r),C=a.useRef(!1),[R,E]=a.useState(0);return a.useEffect(()=>{const v=g.current;if(v)return v.addEventListener(et,j),()=>v.removeEventListener(et,j)},[j]),n.jsx(Ha,{scope:r,orientation:o,dir:b,loop:s,currentTabStopId:f,onItemFocus:a.useCallback(v=>p(v),[p]),onItemShiftTab:a.useCallback(()=>y(!0),[]),onFocusableItemAdd:a.useCallback(()=>E(v=>v+1),[]),onFocusableItemRemove:a.useCallback(()=>E(v=>v-1),[]),children:n.jsx(Mn.div,{tabIndex:w||R===0?-1:0,"data-orientation":o,...m,ref:x,style:{outline:"none",...e.style},onMouseDown:U(e.onMouseDown,()=>{C.current=!0}),onFocus:U(e.onFocus,v=>{const B=!C.current;if(v.target===v.currentTarget&&B&&!w){const P=new CustomEvent(et,La);if(v.currentTarget.dispatchEvent(P),!P.defaultPrevented){const A=N().filter(S=>S.focusable),D=A.find(S=>S.active),$=A.find(S=>S.id===f),ie=[D,$,...A].filter(Boolean).map(S=>S.ref.current);Vn(ie,h)}}C.current=!1}),onBlur:U(e.onBlur,()=>y(!1))})})}),Ln="RovingFocusGroupItem",Un=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:s=!1,tabStopId:l,children:c,...i}=e,u=Re(),d=l||u,h=Ga(Ln,r),m=h.currentTabStopId===d,g=$n(r),{onFocusableItemAdd:x,onFocusableItemRemove:b,currentTabStopId:f}=h;return a.useEffect(()=>{if(o)return x(),()=>b()},[o,x,b]),n.jsx(lt.ItemSlot,{scope:r,id:d,focusable:o,active:s,children:n.jsx(Mn.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...i,ref:t,onMouseDown:U(e.onMouseDown,p=>{o?h.onItemFocus(d):p.preventDefault()}),onFocus:U(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:U(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){h.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const w=Ka(p,h.orientation,h.dir);if(w!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let j=g().filter(N=>N.focusable).map(N=>N.ref.current);if(w==="last")j.reverse();else if(w==="prev"||w==="next"){w==="prev"&&j.reverse();const N=j.indexOf(p.currentTarget);j=h.loop?Za(j,N+1):j.slice(N+1)}setTimeout(()=>Vn(j))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:f!=null}):c})})});Un.displayName=Ln;var qa={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Xa(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ka(e,t,r){const o=Xa(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return qa[o]}function Vn(e,t=!1){const r=document.activeElement;for(const o of e)if(o===r||(o.focus({preventScroll:t}),document.activeElement!==r))return}function Za(e,t){return e.map((r,o)=>e[(t+o)%e.length])}var Ja=zn,Qa=Un;function ei(e){const[t,r]=a.useState(void 0);return fe(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const l=s[0];let c,i;if("borderBoxSize"in l){const u=l.borderBoxSize,d=Array.isArray(u)?u[0]:u;c=d.inlineSize,i=d.blockSize}else c=e.offsetWidth,i=e.offsetHeight;r({width:c,height:i})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else r(void 0)},[e]),t}function ti(e){const t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var pt="Radio",[ni,Hn]=Tn(pt),[ri,oi]=ni(pt),Gn=a.forwardRef((e,t)=>{const{__scopeRadio:r,name:o,checked:s=!1,required:l,disabled:c,value:i="on",onCheck:u,form:d,...h}=e,[m,g]=a.useState(null),x=G(t,p=>g(p)),b=a.useRef(!1),f=m?d||!!m.closest("form"):!0;return n.jsxs(ri,{scope:r,checked:s,disabled:c,children:[n.jsx(He.button,{type:"button",role:"radio","aria-checked":s,"data-state":Kn(s),"data-disabled":c?"":void 0,disabled:c,value:i,...h,ref:x,onClick:U(e.onClick,p=>{s||u?.(),f&&(b.current=p.isPropagationStopped(),b.current||p.stopPropagation())})}),f&&n.jsx(Xn,{control:m,bubbles:!b.current,name:o,value:i,checked:s,required:l,disabled:c,form:d,style:{transform:"translateX(-100%)"}})]})});Gn.displayName=pt;var Yn="RadioIndicator",qn=a.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:o,...s}=e,l=oi(Yn,r);return n.jsx(we,{present:o||l.checked,children:n.jsx(He.span,{"data-state":Kn(l.checked),"data-disabled":l.disabled?"":void 0,...s,ref:t})})});qn.displayName=Yn;var si="RadioBubbleInput",Xn=a.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:o=!0,...s},l)=>{const c=a.useRef(null),i=G(c,l),u=ti(r),d=ei(t);return a.useEffect(()=>{const h=c.current;if(!h)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==r&&x){const b=new Event("click",{bubbles:o});x.call(h,r),h.dispatchEvent(b)}},[u,r,o]),n.jsx(He.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:i,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Xn.displayName=si;function Kn(e){return e?"checked":"unchecked"}var ai=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ge="RadioGroup",[ii]=Tn(Ge,[Wn,Hn]),Zn=Wn(),Jn=Hn(),[li,ci]=ii(Ge),Qn=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:o,defaultValue:s,value:l,required:c=!1,disabled:i=!1,orientation:u,dir:d,loop:h=!0,onValueChange:m,...g}=e,x=Zn(r),b=On(d),[f,p]=ut({prop:l,defaultProp:s??null,onChange:m,caller:Ge});return n.jsx(li,{scope:r,name:o,required:c,disabled:i,value:f,onValueChange:p,children:n.jsx(Ja,{asChild:!0,...x,orientation:u,dir:b,loop:h,children:n.jsx(He.div,{role:"radiogroup","aria-required":c,"aria-orientation":u,"data-disabled":i?"":void 0,dir:b,...g,ref:t})})})});Qn.displayName=Ge;var er="RadioGroupItem",tr=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:o,...s}=e,l=ci(er,r),c=l.disabled||o,i=Zn(r),u=Jn(r),d=a.useRef(null),h=G(t,d),m=l.value===s.value,g=a.useRef(!1);return a.useEffect(()=>{const x=f=>{ai.includes(f.key)&&(g.current=!0)},b=()=>g.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",b)}},[]),n.jsx(Qa,{asChild:!0,...i,focusable:!c,active:m,children:n.jsx(Gn,{disabled:c,required:l.required,checked:m,...u,...s,name:l.name,ref:h,onCheck:()=>l.onValueChange(s.value),onKeyDown:U(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:U(s.onFocus,()=>{g.current&&d.current?.click()})})})});tr.displayName=er;var di="RadioGroupIndicator",nr=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...o}=e,s=Jn(r);return n.jsx(qn,{...s,...o,ref:t})});nr.displayName=di;var rr=Qn,or=tr,ui=nr;const sr=a.forwardRef(({className:e,...t},r)=>n.jsx(rr,{className:X("grid gap-2",e),...t,ref:r}));sr.displayName=rr.displayName;const ve=a.forwardRef(({className:e,...t},r)=>n.jsx(or,{ref:r,className:X("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(ui,{className:"flex items-center justify-center",children:n.jsx(yr,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ve.displayName=or.displayName;const ar=`https://${ot}.supabase.co/functions/v1/make-server-2516be19`;async function q(e,t={},r){const o={"Content-Type":"application/json",...t.headers};r&&(o.Authorization=`Bearer ${r}`);try{const s=await fetch(`${ar}${e}`,{...t,headers:o});if(!s.ok){const l=await s.json().catch(()=>({error:`HTTP ${s.status}: ${s.statusText}`}));throw new Error(l.error||`Request failed with status ${s.status}`)}return await s.json()}catch(s){if(s.name==="TypeError"&&s.message?.includes("fetch")){const l=new Error("Failed to fetch - Network error. Please check your connection.");throw l.name="TypeError",console.error(`API Error [${e}]: Network error`,l),l}throw console.error(`API Error [${e}]:`,s),s}}async function fi(e,t){return q(`/profile/${e}`,{method:"GET"},t)}async function tt(e,t,r){return q(`/profile/${e}`,{method:"PATCH",body:JSON.stringify(t)},r)}async function mi(e,t){const r=new URLSearchParams;if(!t?.school)throw new Error("School parameter is required");r.append("school",t.school),t?.year&&r.append("year",t.year),t?.major&&r.append("major",t.major),t?.interests&&r.append("interests",t.interests.join(","));const s=`/profiles?${r.toString()}`;return q(s,{method:"GET"},e)}async function ir(e){return q("/friendships?status=accepted",{method:"GET"},e)}async function hi(e){return q("/friendships?status=pending",{method:"GET"},e)}async function pi(e,t){return q(`/friendships/${e}/accept`,{method:"POST"},t)}async function xi(e,t){return q(`/friendships/${e}/decline`,{method:"POST"},t)}async function lr(e,t,r=1,o=20){const s=new URLSearchParams;t&&s.append("filter",t),s.append("page",r.toString()),s.append("limit",o.toString());const l=`/forum/posts?${s.toString()}`;return q(l,{method:"GET"},e)}async function gi(e,t){return q("/forum/posts",{method:"POST",body:JSON.stringify(e)},t)}async function bi(e,t){return q(`/forum/posts/${e}/like`,{method:"POST"},t)}async function yi(e){return q("/chats",{method:"GET"},e)}async function vi(e,t){const r=new FormData;r.append("file",e);const o=e.type.startsWith("image/"),s=e.type.startsWith("video/"),l=o?"image":s?"video":"image";r.append("type",l);const c=await fetch(`${ar}/forum/upload-media`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:r});if(!c.ok){const i=await c.json().catch(()=>({error:"Failed to upload media"}));throw new Error(i.error||"Failed to upload media")}return await c.json()}async function Tt(e,t,r){return q(e,{method:"POST",body:JSON.stringify(t)},r)}function wi({userId:e,userName:t,accessToken:r,open:o,onClose:s,onBlock:l}){const[c,i]=a.useState(null),[u,d]=a.useState(""),[h,m]=a.useState(""),[g,x]=a.useState(!1),b=async()=>{if(!u){k.error("Please select a reason");return}x(!0);try{await Tt(`/user/${e}/report`,{reason:u,details:h},r),k.success("Report submitted. We will review it shortly."),s(),i(null),d(""),m("")}catch(p){k.error(p.message||"Failed to submit report")}finally{x(!1)}},f=async()=>{x(!0);try{await Tt(`/user/${e}/block`,{},r),k.success(`${t} has been blocked`),l?.(),s(),i(null)}catch(p){k.error(p.message||"Failed to block user")}finally{x(!1)}};return n.jsx(ma,{open:o,onOpenChange:s,children:n.jsxs(Dn,{className:"max-w-md",children:[n.jsxs(In,{children:[n.jsxs(An,{children:["Report or Block ",t]}),n.jsx(_n,{children:"Help us keep Bonded safe and respectful"})]}),c?c==="report"?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(oe,{children:"Reason for reporting"}),n.jsxs(sr,{value:u,onValueChange:d,className:"mt-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ve,{value:"inappropriate",id:"inappropriate"}),n.jsx(oe,{htmlFor:"inappropriate",className:"font-normal",children:"Inappropriate content"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ve,{value:"harassment",id:"harassment"}),n.jsx(oe,{htmlFor:"harassment",className:"font-normal",children:"Harassment or bullying"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ve,{value:"spam",id:"spam"}),n.jsx(oe,{htmlFor:"spam",className:"font-normal",children:"Spam or fake profile"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ve,{value:"other",id:"other"}),n.jsx(oe,{htmlFor:"other",className:"font-normal",children:"Other"})]})]})]}),n.jsxs("div",{children:[n.jsx(oe,{htmlFor:"details",children:"Additional details (optional)"}),n.jsx(pa,{id:"details",value:h,onChange:p=>m(p.target.value),placeholder:"Tell us more about what happened...",className:"mt-2",rows:3})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"outline",onClick:()=>{i(null),d(""),m("")},className:"flex-1",children:"Back"}),n.jsx(Y,{onClick:b,disabled:g||!u,className:"flex-1 bg-gradient-to-r from-[#2E7B91] to-[#25658A] hover:from-[#25658A] hover:to-[#1E4F74] text-white",children:"Submit Report"})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-[#2E7B9115] rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(jr,{className:"w-5 h-5 text-[#2E7B91] flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-[#1E4F74] font-medium mb-1",children:"What happens when you block someone?"}),n.jsxs("ul",{className:"text-xs text-[#475569] space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"They won't be able to message you"}),n.jsx("li",{children:"They won't appear in your Discover feed"}),n.jsx("li",{children:"You won't appear in their Discover feed"}),n.jsx("li",{children:"You can unblock them anytime in settings"})]})]})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"outline",onClick:()=>i(null),className:"flex-1",children:"Cancel"}),n.jsxs(Y,{onClick:f,disabled:g,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:["Block ",t]})]})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Y,{onClick:()=>i("report"),variant:"outline",className:"w-full justify-start",children:[n.jsx(vr,{className:"w-4 h-4 mr-2"}),"Report User"]}),n.jsxs(Y,{onClick:()=>i("block"),variant:"outline",className:"w-full justify-start",children:[n.jsx(wr,{className:"w-4 h-4 mr-2"}),"Block User"]})]})]})})}function ji({profile:e,onClose:t,onNext:r,onPrev:o,hasNext:s,hasPrev:l,accessToken:c}){const[i,u]=a.useState(!1),[d,h]=a.useState(!1),[m,g]=a.useState(!1);a.useEffect(()=>{setTimeout(()=>{const D=document.querySelector("[data-action-buttons]");if(D){console.log("âœ… Action buttons element found in DOM");const $=window.getComputedStyle(D);console.log("Button position:",$.position),console.log("Button bottom:",$.bottom),console.log("Button zIndex:",$.zIndex),console.log("Button display:",$.display),console.log("Button visibility:",$.visibility)}else console.error("âŒ Action buttons element NOT found in DOM!")},100)},[]);const[x,b]=a.useState(null),[f,p]=a.useState(null),[w,y]=a.useState(0),[j,N]=a.useState(null),[C,R]=a.useState(!1);a.useEffect(()=>{h(!1),E()},[e.id]);const E=async()=>{if(c){R(!0);try{const D=await fetch(`https://${st}.supabase.co/functions/v1/make-server-2516be19/compatibility/${e.id}`,{headers:{Authorization:`Bearer ${c}`}});if(D.ok){const $=await D.json();N($)}}catch(D){console.error("Error loading compatibility:",D)}finally{R(!1)}}},v=50,B=D=>{p(null),b(D.targetTouches[0].clientX)},P=D=>{p(D.targetTouches[0].clientX)},A=()=>{if(!x||!f)return;const D=x-f,$=D>v,ae=D<-v;$&&s&&(y(1),r()),ae&&l&&(y(-1),o())};return n.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",style:{height:"100dvh",maxHeight:"100dvh",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,WebkitTransform:"translateZ(0)",transform:"translateZ(0)",overflow:"hidden"},onClick:t,children:[n.jsxs(Ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"relative w-full max-w-md bg-white rounded-2xl overflow-hidden",style:{borderRadius:"var(--radius-2xl)",boxShadow:"var(--shadow-xl)"},onClick:D=>D.stopPropagation(),onTouchStart:B,onTouchMove:P,onTouchEnd:A,children:[n.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-20 w-9 h-9 rounded-full flex items-center justify-center transition-all",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)",boxShadow:"var(--shadow-md)",color:"var(--color-text-primary)"},children:n.jsx(he,{className:"w-5 h-5"})}),n.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 px-3 py-1.5 rounded-full",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)",boxShadow:"var(--shadow-sm)"},children:n.jsx("p",{className:"text-xs font-medium",style:{color:"var(--color-text-secondary)",fontFamily:"var(--font-body)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-semibold)"},children:"Swipe to see more profiles"})}),n.jsxs("div",{className:"relative w-full h-80 overflow-hidden",style:{background:"var(--gradient-accent)"},children:[n.jsx(Ae.img,{initial:{opacity:0,x:w*50},animate:{opacity:1,x:0},exit:{opacity:0,x:-w*50},transition:{duration:.3},src:e.profilePicture||e.photos?.[0]||e.imageUrl||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=800&q=80",alt:e.name,className:"w-full h-full object-cover"},e.id),l&&n.jsx("button",{onClick:o,className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full flex items-center justify-center transition-all z-10",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)",boxShadow:"var(--shadow-md)",color:"var(--color-text-primary)"},children:n.jsx(Sr,{className:"w-6 h-6"})}),s&&n.jsx("button",{onClick:r,className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full flex items-center justify-center transition-all z-10",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)",boxShadow:"var(--shadow-md)",color:"var(--color-text-primary)"},children:n.jsx(Nr,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"bg-white p-5 space-y-4",style:{padding:"var(--space-6)"},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h2",{className:"text-xl font-bold",style:{color:"var(--color-text-primary)",fontFamily:"var(--font-heading)",fontSize:"var(--font-size-h3)",fontWeight:"var(--font-weight-bold)"},children:[e.name,", ",e.age]}),j&&j.score>=70&&n.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0",style:{background:"var(--color-success)"},children:n.jsx(Cr,{className:"w-4 h-4 text-white"})})]}),e.bio&&n.jsx("p",{className:"text-sm leading-relaxed line-clamp-3",style:{color:"var(--color-text-secondary)",fontFamily:"var(--font-body)",fontSize:"var(--font-size-body-sm)",lineHeight:"var(--line-height-relaxed)"},children:e.bio}),!e.bio&&n.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-secondary)",fontFamily:"var(--font-body)",fontSize:"var(--font-size-caption)"},children:[e.major," ",e.year&&`â€¢ ${e.year}`]}),e.interests&&e.interests.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:e.interests.slice(0,4).map((D,$)=>n.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-semibold",style:{background:"var(--color-primary-bg)",color:"var(--color-primary)",borderRadius:"var(--pill-radius)",fontFamily:"var(--font-body)",fontSize:"var(--font-size-small)",fontWeight:"var(--font-weight-semibold)"},children:D},$))}),n.jsxs("button",{onClick:D=>{if(D.stopPropagation(),!c){k.error("Please log in to connect");return}u(!0)},className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 text-white rounded-full text-sm font-medium transition-all",style:{background:"var(--gradient-accent)",borderRadius:"var(--radius-full)",fontFamily:"var(--font-body)",fontSize:"var(--font-size-body-sm)",fontWeight:"var(--font-weight-bold)",height:"var(--button-height-sm)",boxShadow:"var(--shadow-md)"},children:[n.jsx(Er,{className:"w-4 h-4"}),"Connect"]})]})]}),i&&n.jsx(co,{profile:e,onClose:()=>u(!1),accessToken:c}),c&&n.jsx(wi,{userId:e.id,userName:e.name,accessToken:c,open:m,onClose:()=>g(!1),onBlock:()=>{k.success("User blocked. They will no longer appear in your feed."),t()}})]})}class Si{shouldLog(t){return t==="warn"||t==="error"}debug(...t){this.shouldLog("debug")&&console.debug("[DEBUG]",...t)}info(...t){this.shouldLog("info")&&console.info("[INFO]",...t)}warn(...t){this.shouldLog("warn")&&console.warn("[WARN]",...t)}error(...t){if(this.shouldLog("error")&&console.error("[ERROR]",...t),typeof window<"u"&&window.Sentry)try{window.Sentry.captureException(new Error(String(t[0])))}catch{}}group(t){}groupEnd(){}}const O=new Si;function Mt({src:e,alt:t}){const[r,o]=a.useState(!1);return!e||r?n.jsx("div",{className:"text-8xl opacity-30",children:"ðŸ“¸"}):n.jsx("img",{src:e,alt:t,className:"w-full h-full object-cover",onError:()=>o(!0),loading:"lazy"})}function Ni({onProfileDetailOpen:e,onNavigateToProfile:t}){const r=Le(),o=pe(),[s,l]=a.useState([]),[c,i]=a.useState(null),[u,d]=a.useState(!0),[h,m]=a.useState("all"),[g,x]=a.useState("card"),[b,f]=a.useState(2),[p,w]=a.useState(!1),[y,j]=a.useState(0),[N,C]=a.useState(2),R=a.useRef(null);a.useEffect(()=>{D()},[o,h]);const E=(S,I)=>{const W=I.clientX-S.clientX,V=I.clientY-S.clientY;return Math.sqrt(W*W+V*V)},v=S=>{if(g!=="grid"||S.touches.length!==2)return;const I=E(S.touches[0],S.touches[1]);j(I),C(b),w(!0)},B=S=>{if(!p||S.touches.length!==2||g!=="grid")return;S.preventDefault();const I=E(S.touches[0],S.touches[1]),W=I-y;if(Math.abs(W)>50){if(W>0&&N<5){const H=N+1,T=H<=5?H:5;f(T),j(I),C(T)}else if(W<0&&N>2){const H=N-1,T=H>=2?H:2;f(T),j(I),C(T)}}},P=()=>{w(!1),j(0)},A=S=>{if(g!=="grid"||!S.ctrlKey)return;S.preventDefault();const I=S.deltaY;if(Math.abs(I)>50){if(I<0&&b<5){const V=b+1,H=V<=5?V:5;f(H)}else if(I>0&&b>2){const V=b-1,H=V>=2?V:2;f(H)}}},D=async()=>{if(!o){O.debug("No access token, skipping profile load"),d(!1),l([]);return}const S=r?.school||"University of Illinois Urbana-Champaign";try{d(!0);const I={school:S};h!=="all"&&(I.year=h.charAt(0).toUpperCase()+h.slice(1));const H=((await mi(o,I)).profiles||[]).map(T=>({id:T.id||T.user_id,name:T.name,age:T.age||21,school:T.school||"University of Illinois",major:T.major||"Undeclared",year:T.year_level||T.year||"Student",bio:T.bio||"",interests:T.interests||[],lookingFor:T.looking_for||[],imageUrl:T.profile_picture||T.photos?.[0]||`https://api.dicebear.com/7.x/avataaars/svg?seed=${T.id}`,profilePicture:T.profile_picture||T.photos?.[0]||`https://api.dicebear.com/7.x/avataaars/svg?seed=${T.id}`,photos:T.photos||[],mutualFriends:T.mutual_friends_count||0}));l(H),H.length===0&&k.info("No students found matching your filters")}catch(I){const W=I;O.error("Failed to load profiles:",W),W.message?.includes("401")||W.message?.includes("Unauthorized")?O.warn("Authentication error - token may be expired"):k.error(W.message||"Failed to load profiles"),l([])}finally{d(!1)}},$=s.filter(S=>h==="all"?!0:S.year.toLowerCase()===h.toLowerCase()),ae=()=>{i(null),e?.(!1)};if(c!==null)return n.jsx(ji,{profile:$[c],onClose:ae,accessToken:o||void 0,onNext:()=>{},onPrev:()=>{},hasNext:!1,hasPrev:!1});const ie=[{id:"all",label:"ðŸŽ“ All Students"},{id:"cs",label:"ðŸ’» CS Majors"},{id:"athletes",label:"ðŸ€ Athletes"},{id:"creatives",label:"ðŸŽ¨ Creatives"},{id:"musicians",label:"ðŸŽµ Musicians"},{id:"new",label:"ðŸŒŸ New"}];return n.jsxs("div",{className:"min-h-screen pb-20",style:{background:"var(--gradient-background)",position:"relative"},children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-lg border-b",style:{borderColor:"#E8E8F0",padding:"16px 20px"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-bold",style:{fontFamily:"'Outfit', sans-serif",fontSize:"22px",fontWeight:700,background:"linear-gradient(135deg, #FF6B6B, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Bonded"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center border transition-all hover:border-pink-500 hover:scale-105",style:{background:"white",borderColor:"#E8E8F0"},children:n.jsx(ze,{className:"w-5 h-5",style:{color:"#2D2D2D"}})}),n.jsxs("button",{className:"w-10 h-10 rounded-full flex items-center justify-center border transition-all hover:border-pink-500 hover:scale-105 relative",style:{background:"white",borderColor:"#E8E8F0"},children:[n.jsx(kr,{className:"w-5 h-5",style:{color:"#2D2D2D"}}),n.jsx("span",{className:"absolute -top-1 -right-1 w-4.5 h-4.5 rounded-full text-white text-[10px] font-bold flex items-center justify-center border-2 border-white",style:{background:"#FF6B6B",width:"18px",height:"18px",fontSize:"10px",fontWeight:700},children:"3"})]})]})]})}),n.jsxs("div",{className:"sticky bg-white border-b",style:{top:"73px",borderColor:"#E8E8F0",zIndex:40,padding:"12px 20px"},children:[n.jsx("style",{children:`
          .filter-scroll::-webkit-scrollbar {
            display: none;
          }
        `}),n.jsx("div",{className:"filter-scroll flex gap-2",style:{overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:ie.map(S=>n.jsx("button",{onClick:()=>m(S.id),className:"px-4 py-2 text-sm font-semibold whitespace-nowrap transition-all",style:{background:h===S.id?"linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(167, 139, 250, 0.1))":"white",color:h===S.id?"#FF6B6B":"#6B6B6B",border:h===S.id?"2px solid #FF6B6B":"2px solid #E8E8F0",borderRadius:"20px",fontFamily:"'Inter', sans-serif",fontSize:"14px",fontWeight:600},children:S.label},S.id))})]}),n.jsx("div",{ref:R,className:"overflow-y-auto",style:{height:"calc(100vh - 73px - 61px - 80px)",padding:"16px 20px 20px",touchAction:g==="grid"?"pan-y pinch-zoom":"pan-y",userSelect:"none"},onTouchStart:v,onTouchMove:B,onTouchEnd:P,onWheel:A,children:u?g==="grid"?n.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${b}, 1fr)`},children:Array.from({length:b*3}).map((S,I)=>n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm animate-pulse",children:[n.jsx("div",{className:"aspect-square bg-gray-200"}),n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"h-3 bg-gray-200 rounded mb-1 w-3/4 mx-auto"}),b<=3&&n.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/2 mx-auto mt-1"})]})]},I))}):n.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((S,I)=>n.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm animate-pulse",children:[n.jsx("div",{className:"h-70 bg-gray-200",style:{height:"280px"}}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2 w-3/4"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4 w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4 w-full"}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("div",{className:"h-6 w-24 bg-gray-200 rounded-full"}),n.jsx("div",{className:"h-6 w-24 bg-gray-200 rounded-full"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("div",{className:"h-10 bg-gray-200 rounded-xl"}),n.jsx("div",{className:"h-10 bg-gray-200 rounded-xl"})]})]})]},I))}):$.length===0?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{style:{color:"#6B6B6B"},children:"No students found matching your filters."})}):g==="grid"?n.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${b}, 1fr)`},children:$.map((S,I)=>n.jsxs("button",{onClick:()=>t?.(S.id),className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all text-left",style:{boxShadow:"0 1px 4px rgba(0, 0, 0, 0.08)",borderRadius:"8px"},children:[n.jsx("div",{className:"w-full relative flex items-center justify-center overflow-hidden aspect-square",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:n.jsx(Mt,{src:S.profilePicture||S.imageUrl,alt:S.name||"Student"})}),n.jsxs("div",{className:"p-2 text-center",children:[n.jsx("h3",{className:"font-semibold truncate",style:{fontFamily:"'Inter', sans-serif",fontSize:b>=4?"11px":b===3?"12px":"13px",fontWeight:600,color:"#2D2D2D",lineHeight:"1.3"},children:S.name||"Student"}),b<=3&&n.jsx("p",{className:"text-xs mt-0.5 truncate",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"10px"},children:S.year||"Student"})]})]},S.id||`profile-${I}`))}):n.jsx("div",{children:$.map((S,I)=>n.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-all",style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.06)",animation:`slideInUp 0.4s ease-out ${I*.1}s both`,marginBottom:I<$.length-1?"16px":"0"},children:[n.jsx("style",{children:`
                  @keyframes slideInUp {
                    from {
                      opacity: 0;
                      transform: translateY(20px);
                    }
                    to {
                      opacity: 1;
                      transform: translateY(0);
                    }
                  }
                `}),n.jsx("div",{className:"w-full relative flex items-center justify-center overflow-hidden",style:{height:"280px",minHeight:"280px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:n.jsx(Mt,{src:S.profilePicture||S.imageUrl,alt:S.name||"Student"})}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[n.jsx("h2",{className:"text-xl font-bold break-words",style:{fontFamily:"'Outfit', sans-serif",fontSize:"22px",fontWeight:700,color:"#2D2D2D",wordBreak:"break-word",overflowWrap:"break-word"},children:S.name||"Student"}),S.is_verified&&n.jsx("div",{className:"w-4.5 h-4.5 rounded-full flex items-center justify-center text-white text-[11px] flex-shrink-0",style:{background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",width:"18px",height:"18px"},children:"âœ“"})]}),n.jsxs("div",{className:"text-sm mb-1 flex items-center gap-1 flex-wrap",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"14px"},children:[S.age&&n.jsxs("span",{children:[S.age,"."]}),S.age&&S.year&&n.jsx("span",{children:"â€¢"}),S.year&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(rt,{className:"w-3.5 h-3.5 flex-shrink-0"}),n.jsx("span",{children:S.year})]}),S.year&&S.major&&n.jsx("span",{children:"â€¢"}),S.major&&n.jsx("span",{children:S.major}),!S.age&&!S.year&&!S.major&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(rt,{className:"w-3.5 h-3.5 flex-shrink-0"}),n.jsx("span",{children:"Student"})]})]}),n.jsxs("div",{className:"text-sm flex items-center gap-1",style:{color:"#9B9B9B",fontFamily:"'Inter', sans-serif",fontSize:"13px"},children:[n.jsx(Lt,{className:"w-3.5 h-3.5"}),S.school||"University of Illinois Urbana-Champaign"]})]}),S.mutualFriends!==void 0&&S.mutualFriends>0&&n.jsxs("div",{className:"px-2.5 py-1 rounded-xl text-xs font-semibold whitespace-nowrap",style:{background:"rgba(255, 107, 107, 0.1)",color:"#FF6B6B",borderRadius:"12px",fontSize:"12px",fontWeight:600},children:[S.mutualFriends," mutual"]})]}),S.bio&&S.bio.trim()&&n.jsxs("div",{className:"mb-4 text-sm leading-relaxed break-words",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"14px",lineHeight:"1.5",wordBreak:"break-word",overflowWrap:"break-word"},children:['"',S.bio,'"']}),S.interests&&S.interests.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1.5 mb-4",children:S.interests.map((W,V)=>n.jsx("span",{className:"px-3 py-1.5 rounded-lg text-sm font-medium",style:{background:"linear-gradient(135deg, rgba(255, 107, 107, 0.08), rgba(167, 139, 250, 0.08))",border:"1px solid rgba(255, 107, 107, 0.2)",borderRadius:"10px",color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"13px",fontWeight:500},children:W},V))}),n.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[n.jsx("button",{onClick:W=>{W.stopPropagation(),k.info("Connect feature coming soon!")},className:"py-3 px-5 rounded-xl text-white font-semibold transition-all hover:scale-105",style:{background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",borderRadius:"12px",fontSize:"15px",fontWeight:600,boxShadow:"0 4px 12px rgba(255, 107, 107, 0.25)"},children:"Connect"}),n.jsx("button",{onClick:W=>{W.stopPropagation(),t?.(S.id)},className:"py-3 px-5 rounded-xl font-semibold transition-all hover:scale-105",style:{background:"white",color:"#2D2D2D",border:"2px solid #E8E8F0",borderRadius:"12px",fontSize:"15px",fontWeight:600},children:"View Profile"})]})]})]},S.id||`profile-${I}`))})}),n.jsx("button",{className:"fixed right-5 rounded-full flex items-center justify-center text-white transition-all hover:scale-110 hover:rotate-90 z-50",style:{bottom:"100px",width:"56px",height:"56px",background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",boxShadow:"0 8px 20px rgba(255, 107, 107, 0.4)"},children:n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[n.jsx("path",{d:"M3 7v4a1 1 0 0 0 1 1h3",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M21 17v-4a1 1 0 0 0-1-1h-3",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M10 9h4",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M12 7v4",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})]})})]})}function L(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ci(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Pe=43200,Ot=1440;let Ei={};function ki(){return Ei}function $t(e){const t=L(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ie(e,t){const r=L(e),o=L(t),s=r.getTime()-o.getTime();return s<0?-1:s>0?1:s}function Fi(e){return Ci(e,Date.now())}function Pi(e,t){const r=L(e),o=L(t),s=r.getFullYear()-o.getFullYear(),l=r.getMonth()-o.getMonth();return s*12+l}function Ri(e){return t=>{const o=(e?Math[e]:Math.trunc)(t);return o===0?0:o}}function Bi(e,t){return+L(e)-+L(t)}function Di(e){const t=L(e);return t.setHours(23,59,59,999),t}function Ii(e){const t=L(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Ai(e){const t=L(e);return+Di(t)==+Ii(t)}function _i(e,t){const r=L(e),o=L(t),s=Ie(r,o),l=Math.abs(Pi(r,o));let c;if(l<1)c=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*l);let i=Ie(r,o)===-s;Ai(L(e))&&l===1&&Ie(e,o)===1&&(i=!1),c=s*(l-Number(i))}return c===0?0:c}function Ti(e,t,r){const o=Bi(e,t)/1e3;return Ri(r?.roundingMethod)(o)}const Mi={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Oi=(e,t,r)=>{let o;const s=Mi[e];return typeof s=="string"?o=s:t===1?o=s.one:o=s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+o:o+" ago":o};function nt(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const $i={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wi={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zi={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Li={date:nt({formats:$i,defaultWidth:"full"}),time:nt({formats:Wi,defaultWidth:"full"}),dateTime:nt({formats:zi,defaultWidth:"full"})},Ui={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vi=(e,t,r,o)=>Ui[e];function xe(e){return(t,r)=>{const o=r?.context?String(r.context):"standalone";let s;if(o==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,i=r?.width?String(r.width):c;s=e.formattingValues[i]||e.formattingValues[c]}else{const c=e.defaultWidth,i=r?.width?String(r.width):e.defaultWidth;s=e.values[i]||e.values[c]}const l=e.argumentCallback?e.argumentCallback(t):t;return s[l]}}const Hi={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Gi={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Yi={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qi={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xi={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ki={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zi=(e,t)=>{const r=Number(e),o=r%100;if(o>20||o<10)switch(o%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ji={ordinalNumber:Zi,era:xe({values:Hi,defaultWidth:"wide"}),quarter:xe({values:Gi,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xe({values:Yi,defaultWidth:"wide"}),day:xe({values:qi,defaultWidth:"wide"}),dayPeriod:xe({values:Xi,defaultWidth:"wide",formattingValues:Ki,defaultFormattingWidth:"wide"})};function ge(e){return(t,r={})=>{const o=r.width,s=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],l=t.match(s);if(!l)return null;const c=l[0],i=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(i)?el(i,m=>m.test(c)):Qi(i,m=>m.test(c));let d;d=e.valueCallback?e.valueCallback(u):u,d=r.valueCallback?r.valueCallback(d):d;const h=t.slice(c.length);return{value:d,rest:h}}}function Qi(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function el(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function tl(e){return(t,r={})=>{const o=t.match(e.matchPattern);if(!o)return null;const s=o[0],l=t.match(e.parsePattern);if(!l)return null;let c=e.valueCallback?e.valueCallback(l[0]):l[0];c=r.valueCallback?r.valueCallback(c):c;const i=t.slice(s.length);return{value:c,rest:i}}}const nl=/^(\d+)(th|st|nd|rd)?/i,rl=/\d+/i,ol={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sl={any:[/^b/i,/^(a|c)/i]},al={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},il={any:[/1/i,/2/i,/3/i,/4/i]},ll={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cl={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dl={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ul={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fl={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ml={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hl={ordinalNumber:tl({matchPattern:nl,parsePattern:rl,valueCallback:e=>parseInt(e,10)}),era:ge({matchPatterns:ol,defaultMatchWidth:"wide",parsePatterns:sl,defaultParseWidth:"any"}),quarter:ge({matchPatterns:al,defaultMatchWidth:"wide",parsePatterns:il,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ge({matchPatterns:ll,defaultMatchWidth:"wide",parsePatterns:cl,defaultParseWidth:"any"}),day:ge({matchPatterns:dl,defaultMatchWidth:"wide",parsePatterns:ul,defaultParseWidth:"any"}),dayPeriod:ge({matchPatterns:fl,defaultMatchWidth:"any",parsePatterns:ml,defaultParseWidth:"any"})},pl={code:"en-US",formatDistance:Oi,formatLong:Li,formatRelative:Vi,localize:Ji,match:hl,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xl(e,t,r){const o=ki(),s=r?.locale??o.locale??pl,l=2520,c=Ie(e,t);if(isNaN(c))throw new RangeError("Invalid time value");const i=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:c});let u,d;c>0?(u=L(t),d=L(e)):(u=L(e),d=L(t));const h=Ti(d,u),m=($t(d)-$t(u))/1e3,g=Math.round((h-m)/60);let x;if(g<2)return r?.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,i):h<10?s.formatDistance("lessThanXSeconds",10,i):h<20?s.formatDistance("lessThanXSeconds",20,i):h<40?s.formatDistance("halfAMinute",0,i):h<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):g===0?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",g,i);if(g<45)return s.formatDistance("xMinutes",g,i);if(g<90)return s.formatDistance("aboutXHours",1,i);if(g<Ot){const b=Math.round(g/60);return s.formatDistance("aboutXHours",b,i)}else{if(g<l)return s.formatDistance("xDays",1,i);if(g<Pe){const b=Math.round(g/Ot);return s.formatDistance("xDays",b,i)}else if(g<Pe*2)return x=Math.round(g/Pe),s.formatDistance("aboutXMonths",x,i)}if(x=_i(d,u),x<12){const b=Math.round(g/Pe);return s.formatDistance("xMonths",b,i)}else{const b=x%12,f=Math.trunc(x/12);return b<3?s.formatDistance("aboutXYears",f,i):b<9?s.formatDistance("overXYears",f,i):s.formatDistance("almostXYears",f+1,i)}}function $e(e,t){return xl(e,Fi(e),t)}function gl({isOpen:e,onClose:t,onPost:r}){const o=pe(),[s,l]=a.useState(""),[c,i]=a.useState(!1),[u,d]=a.useState(null),[h,m]=a.useState(!1),g=a.useRef(null);if(a.useEffect(()=>{e||(l(""),i(!1),d(null))},[e]),a.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e)return null;const x=async p=>{const w=p.target.files?.[0];if(!w)return;const y=w.type.startsWith("image/"),j=w.type.startsWith("video/");if(!y&&!j){k.error("Please select an image or video file");return}const N=y?10*1024*1024:50*1024*1024;if(w.size>N){k.error(`File is too large. Max size: ${y?"10MB":"50MB"}`);return}let C=w;if(y)try{const E={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0,fileType:w.type};C=await Hr(w,E),k.success(`Image compressed from ${(w.size/1024/1024).toFixed(2)}MB to ${(C.size/1024/1024).toFixed(2)}MB`)}catch(E){O.error("Image compression error:",E),k.warning("Could not compress image, uploading original"),C=w}const R=new FileReader;R.onloadend=()=>{d({file:C,preview:R.result,type:y?"image":"video"})},R.readAsDataURL(C)},b=()=>{d(null),g.current&&(g.current.value="")},f=async()=>{if(!s.trim()&&!u){k.error("Please add some content or media to your post");return}let p=[];if(u&&o)try{m(!0),p=[(await vi(u.file,o)).url]}catch(w){const y=w;O.error("Failed to upload media:",y),k.error(y.message||"Failed to upload media"),m(!1);return}r?.(s,c,p.length>0?p:void 0),l(""),i(!1),d(null),m(!1)};return n.jsx("div",{className:"fixed inset-0 flex items-end",style:{background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",zIndex:1e4,position:"fixed",top:0,left:0,right:0,bottom:0},onClick:t,children:n.jsxs("div",{className:"w-full bg-white shadow-2xl",style:{maxHeight:"75vh",borderTopLeftRadius:"20px",borderTopRightRadius:"20px"},onClick:p=>p.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between border-b",style:{borderColor:"#E8E8F0",padding:"16px 20px"},children:[n.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 transition-colors",children:n.jsx(he,{className:"w-5 h-5",style:{color:"#2D2D2D"}})}),n.jsx("h2",{className:"text-base font-bold",style:{fontFamily:"'Inter', sans-serif",fontSize:"16px",fontWeight:700,color:"#2D2D2D"},children:"Create Post"}),n.jsx("button",{onClick:f,disabled:!s.trim()&&!u||h,className:"px-4 py-1.5 rounded-lg font-semibold transition-all disabled:cursor-not-allowed",style:{background:(s.trim()||u)&&!h?"linear-gradient(135deg, #FF6B6B, #A78BFA)":"#E8E8F0",color:(s.trim()||u)&&!h?"white":"#9B9B9B",fontSize:"14px",fontWeight:600,borderRadius:"8px",opacity:(s.trim()||u)&&!h?1:.6},children:h?"Uploading...":"Post"})]}),n.jsxs("div",{style:{padding:"20px"},children:[n.jsx("textarea",{value:s,onChange:p=>l(p.target.value),placeholder:"What's on your mind?",className:"w-full resize-none focus:outline-none",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"15px",lineHeight:"1.6",minHeight:"200px",background:"transparent"},autoFocus:!0}),n.jsx("style",{children:`
            textarea::placeholder {
              color: #9B9B9B;
              font-family: 'Inter', sans-serif;
              font-size: 15px;
            }
          `}),u&&n.jsxs("div",{className:"mt-4 relative rounded-xl overflow-hidden",style:{borderRadius:"12px"},children:[u.type==="image"?n.jsx("img",{src:u.preview,alt:"Preview",className:"w-full max-h-64 object-cover"}):n.jsx("video",{src:u.preview,controls:!0,className:"w-full max-h-64"}),n.jsx("button",{onClick:b,className:"absolute top-2 right-2 w-8 h-8 rounded-full bg-black/50 hover:bg-black/70 flex items-center justify-center transition-colors",style:{borderRadius:"50%"},children:n.jsx(Fr,{className:"w-5 h-5 text-white"})})]})]}),n.jsxs("div",{className:"flex items-center justify-between border-t",style:{borderColor:"#E8E8F0",padding:"12px 20px"},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{ref:g,type:"file",accept:"image/*,video/*",onChange:x,className:"hidden",id:"post-media-upload"}),n.jsx("label",{htmlFor:"post-media-upload",className:"w-9 h-9 rounded-lg flex items-center justify-center hover:bg-gray-50 transition-colors cursor-pointer",style:{borderRadius:"8px"},children:n.jsx(Pr,{className:"w-5 h-5",style:{color:"#6B6B6B"}})}),n.jsx("button",{className:"w-9 h-9 rounded-lg flex items-center justify-center hover:bg-gray-50 transition-colors",style:{borderRadius:"8px"},children:n.jsx(Rr,{className:"w-5 h-5",style:{color:"#6B6B6B"}})})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:c,onChange:p=>i(p.target.checked),className:"w-4 h-4 rounded cursor-pointer",style:{accentColor:"#FF6B6B"}}),n.jsx("span",{className:"text-sm font-semibold",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"13px",fontWeight:600},children:"Post Anonymously"})]})]})]})})}Array.from({length:10},(e,t)=>({id:`post-${t}`,content:`This is a sample post #${t+1}. Lorem ipsum dolor sit amet, consectetur adipiscing elit. ðŸŽ‰`,author:{id:`user-${t}`,name:`User ${t+1}`,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=${t}`,year_level:"Junior",major:"Computer Science",is_verified:Math.random()>.7},is_anonymous:Math.random()>.6,created_at:new Date(Date.now()-Math.random()*864e5*7).toISOString(),like_count:Math.floor(Math.random()*200),comment_count:Math.floor(Math.random()*50),share_count:Math.floor(Math.random()*20),tags:["campus","life","thoughts"].slice(0,Math.floor(Math.random()*3)+1),has_user_liked:!1}));function bl({onPostComposerChange:e,openComposer:t,onComposerOpened:r,onNavigateToProfile:o}){Le();const s=pe(),[l,c]=a.useState([]),[i,u]=a.useState("trending"),[d,h]=a.useState(!1),[m,g]=a.useState(!0),[x,b]=a.useState(null),[f,p]=a.useState(null),w=a.useRef({});a.useEffect(()=>{y()},[s,i]),a.useEffect(()=>{t&&!d&&(h(!0),r?.())},[t,d,r]),a.useEffect(()=>{const v=setTimeout(()=>{e?.(d)},0);return()=>clearTimeout(v)},[d,e]);const y=async()=>{if(!s){g(!1),c([]);return}try{g(!0);const P=((await lr(s,i)).posts||[]).map(A=>({id:A.id,content:A.content,author:{id:A.authorId,name:A.authorName||"Anonymous Student",avatar_url:A.authorAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${A.authorId}`,year_level:"Student",major:"",is_verified:!1},is_anonymous:A.isAnonymous||!1,created_at:A.createdAt,like_count:A.likes||0,comment_count:A.comments||0,share_count:0,tags:[],has_user_liked:A.userLiked||!1,media_url:A.mediaUrl,media_type:A.mediaType}));c(P)}catch(v){const B=v;O.error("Failed to load posts:",B),B.message?.includes("401")||B.message?.includes("Unauthorized")?(O.warn("Authentication error loading posts"),c([])):B.message?.includes("Failed to fetch")||B.name==="TypeError"?(O.warn("Network error loading posts"),c([])):(k.error(B.message||"Failed to load posts"),c([]))}finally{g(!1)}},j=[{id:"trending",label:"ðŸ”¥ Trending"},{id:"photos",label:"ðŸ“¸ Photos"},{id:"videos",label:"ðŸŽ¥ Videos"},{id:"thoughts",label:"ðŸ’­ Thoughts"},{id:"questions",label:"â“ Questions"},{id:"events",label:"ðŸŽ‰ Events"},{id:"anonymous",label:"ðŸ‘» Anonymous"},{id:"study",label:"ðŸ“š Study"}],N=async v=>{if(!s){k.error("Please log in to like posts");return}const B=l.find(P=>P.id===v);if(B){c(l.map(P=>P.id===v?{...P,has_user_liked:!P.has_user_liked,like_count:P.has_user_liked?P.like_count-1:P.like_count+1}:P));try{await bi(v,s)}catch(P){const A=P;O.error("Failed to toggle like:",A),k.error(A.message||"Failed to update like"),c(l.map(D=>D.id===v?{...D,has_user_liked:B.has_user_liked,like_count:B.like_count}:D))}}},C=async(v,B,P)=>{if(!s){k.error("Please log in to create posts");return}try{const A=await gi({content:v,isAnonymous:B,mediaUrls:P},s);k.success("Post created successfully!"),h(!1),e?.(!1),setTimeout(async()=>{await y()},100)}catch(A){const D=A;O.error("Failed to create post:",D),k.error(D.message||"Failed to create post")}},R=async v=>{const B=`${window.location.origin}/forum/post/${v.id}`,P=v.is_anonymous?`Check out this anonymous post on Bonded: "${v.content.substring(0,100)}${v.content.length>100?"...":""}"`:`Check out this post by ${v.author.name} on Bonded: "${v.content.substring(0,100)}${v.content.length>100?"...":""}"`;if(navigator.share)try{await navigator.share({title:"Post from Bonded",text:P,url:B}),k.success("Post shared!"),p(null)}catch(A){A.name!=="AbortError"&&await E(B)}else await E(B)},E=async v=>{try{await navigator.clipboard.writeText(v),k.success("Link copied to clipboard!"),p(null)}catch(B){O.error("Failed to copy:",B),k.error("Failed to copy link")}};return a.useEffect(()=>{const v=B=>{if(f){const P=w.current[f];P&&!P.contains(B.target)&&p(null)}};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[f]),n.jsxs("div",{className:"min-h-screen pb-20",style:{background:"var(--gradient-background)"},children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-lg border-b",style:{borderColor:"#E8E8F0",padding:"16px 20px"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center text-white font-bold text-lg",style:{background:"linear-gradient(135deg, #FF6B6B, #A78BFA)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:"B"}),n.jsx("h1",{className:"text-xl font-bold",style:{fontFamily:"'Outfit', sans-serif",fontSize:"22px",fontWeight:700,background:"linear-gradient(135deg, #FF6B6B, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Forum"})]}),n.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center border transition-all hover:border-pink-500 hover:scale-105",style:{background:"white",borderColor:"#E8E8F0"},children:n.jsx(ze,{className:"w-5 h-5",style:{color:"#2D2D2D"}})})]})}),n.jsxs("div",{className:"sticky bg-white border-b",style:{top:"73px",borderColor:"#E8E8F0",zIndex:40,padding:"12px 20px"},children:[n.jsx("style",{children:`
          .forum-filter-scroll::-webkit-scrollbar {
            display: none;
          }
        `}),n.jsx("div",{className:"forum-filter-scroll flex gap-2",style:{overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:j.map(v=>n.jsx("button",{onClick:()=>u(v.id),className:"px-4 py-2 text-sm font-semibold whitespace-nowrap transition-all",style:{background:i===v.id?"linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(167, 139, 250, 0.1))":"white",color:i===v.id?"#FF6B6B":"#6B6B6B",border:i===v.id?"2px solid #FF6B6B":"2px solid #E8E8F0",borderRadius:"20px",fontFamily:"'Inter', sans-serif",fontSize:"14px",fontWeight:600},children:v.label},v.id))})]}),n.jsxs("div",{className:"overflow-y-auto",style:{height:"calc(100vh - 73px - 61px - 80px)",padding:"16px 20px 20px"},children:[n.jsxs("div",{className:"rounded-2xl p-4 mb-4",style:{background:"linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(167, 139, 250, 0.1))",border:"2px solid rgba(255, 107, 107, 0.2)"},children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-xl",children:"ðŸ”¥"}),n.jsx("h3",{className:"text-base font-bold",style:{color:"#2D2D2D"},children:"Trending on Campus"})]}),n.jsx("div",{className:"space-y-2",children:[{topic:"#MidtermSzn",count:"234 posts"},{topic:"#FreeFood",count:"189 posts"},{topic:"#RoommateSearch",count:"156 posts"}].map((v,B)=>n.jsxs("div",{className:"flex justify-between items-center py-2",children:[n.jsx("span",{className:"text-sm font-semibold",style:{color:"#2D2D2D"},children:v.topic}),n.jsx("span",{className:"text-xs",style:{color:"#9B9B9B"},children:v.count})]},B))})]}),m?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(_e,{className:"w-8 h-8 animate-spin mx-auto mb-4",style:{color:"#FF6B6B"}}),n.jsx("p",{style:{color:"#6B6B6B"},children:"Loading posts..."})]}):l.length===0?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{style:{color:"#6B6B6B"},children:"No posts yet. Be the first to post!"})}):l.map((v,B)=>n.jsxs("div",{className:"bg-white rounded-2xl p-4 mb-4 shadow-sm hover:shadow-md transition-all",style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.06)",animation:`slideIn 0.4s ease-out ${B*.1}s both`},children:[n.jsx("style",{children:`
                @keyframes slideIn {
                  from {
                    opacity: 0;
                    transform: translateY(20px);
                  }
                  to {
                    opacity: 1;
                    transform: translateY(0);
                  }
                }
              `}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",style:{background:v.is_anonymous?"linear-gradient(135deg, #6B6B6B, #9B9B9B)":"linear-gradient(135deg, #667eea, #764ba2)"},children:v.is_anonymous?"ðŸ‘»":v.media_type==="video"?"ðŸŽ¥":v.media_url?"ðŸ“¸":"ðŸ’­"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-bold text-sm truncate",style:{color:"#2D2D2D",fontSize:"15px"},children:v.is_anonymous?"Anonymous":v.author.name}),v.is_anonymous&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-bold rounded-md",style:{background:"rgba(107, 107, 107, 0.1)",color:"#6B6B6B",fontSize:"11px"},children:"ANON"}),!v.is_anonymous&&v.author.is_verified&&n.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-[10px]",style:{background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)"},children:"âœ“"})]}),n.jsx("p",{className:"text-xs",style:{color:"#9B9B9B",fontSize:"13px"},children:v.is_anonymous?$e(new Date(v.created_at),{addSuffix:!0}):`${v.author.year_level||"Student"} â€¢ ${v.author.major||"Undeclared"} â€¢ ${$e(new Date(v.created_at),{addSuffix:!0})}`})]}),n.jsxs("div",{className:"relative",ref:P=>{w.current[v.id]=P},children:[n.jsx("button",{onClick:P=>{P.stopPropagation(),p(f===v.id?null:v.id)},className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 transition-colors",children:n.jsx("span",{style:{color:"#2D2D2D",fontSize:"20px"},children:"â‹¯"})}),f===v.id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(null),style:{background:"transparent"}}),n.jsxs("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border z-50 min-w-[160px] overflow-hidden",style:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.12)",borderColor:"#E8E8F0"},children:[n.jsxs("button",{onClick:P=>{P.stopPropagation(),R(v)},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-50 transition-colors text-left",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"14px",fontWeight:500},children:[n.jsx(Ut,{className:"w-4 h-4",style:{color:"#6B6B6B"}}),n.jsx("span",{children:"Share"})]}),n.jsxs("button",{onClick:P=>{P.stopPropagation(),E(`${window.location.origin}/forum/post/${v.id}`)},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-50 transition-colors text-left border-t",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"14px",fontWeight:500,borderColor:"#F3F4FF"},children:[n.jsx(Br,{className:"w-4 h-4",style:{color:"#6B6B6B"}}),n.jsx("span",{children:"Copy Link"})]})]})]})]})]}),n.jsx("p",{className:"text-base leading-relaxed mb-3",style:{color:"#2D2D2D",fontSize:"15px",lineHeight:"1.5"},children:v.content}),v.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.tags.map(P=>n.jsxs("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-lg",style:{background:"rgba(255, 107, 107, 0.1)",color:"#FF6B6B",fontSize:"12px",borderRadius:"8px"},children:["#",P]},P))}),v.media_url&&n.jsx("div",{className:"rounded-xl overflow-hidden mb-3",style:{borderRadius:"12px"},children:v.media_type==="video"?n.jsxs("div",{className:"w-full h-60 flex flex-col items-center justify-center relative",style:{background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",opacity:.3},children:[n.jsx("span",{className:"text-6xl",children:"ðŸŽ¥"}),n.jsx("span",{className:"text-4xl mt-2 opacity-80",children:"â–¶ï¸"})]}):n.jsx("div",{className:"w-full h-60 flex items-center justify-center",style:{background:"linear-gradient(135deg, #667eea, #764ba2)",opacity:.3},children:n.jsx("span",{className:"text-6xl",children:"ðŸŒ…"})})}),n.jsxs("div",{className:"flex items-center gap-5 pt-3 border-t",style:{borderColor:"#F3F4FF"},children:[n.jsxs("button",{onClick:()=>N(v.id),className:"flex items-center gap-2 text-sm font-semibold transition-all hover:scale-105",style:{color:v.has_user_liked?"#FF6B6B":"#6B6B6B"},children:[n.jsx("span",{className:"text-xl",children:v.has_user_liked?"â¤ï¸":"ðŸ¤"}),n.jsx("span",{children:v.like_count})]}),n.jsxs("button",{className:"flex items-center gap-2 text-sm font-semibold transition-all hover:scale-105",style:{color:"#6B6B6B"},children:[n.jsx("span",{className:"text-xl",children:"ðŸ’¬"}),n.jsx("span",{children:v.comment_count})]}),n.jsxs("button",{className:"flex items-center gap-2 text-sm font-semibold transition-all hover:scale-105",style:{color:"#6B6B6B"},children:[n.jsx("span",{className:"text-xl",children:"ðŸ”—"}),n.jsx("span",{children:v.share_count})]})]})]},v.id))]}),n.jsx("button",{onClick:()=>{h(!0),e?.(!0),r?.()},className:"fixed rounded-full flex items-center justify-center text-white transition-all hover:scale-110 hover:rotate-90 z-[9998]",style:{bottom:"100px",right:"20px",width:"56px",height:"56px",background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",boxShadow:"0 8px 20px rgba(255, 107, 107, 0.4)",fontSize:"28px",fontWeight:300},children:"+"}),n.jsx(gl,{isOpen:d,onClose:()=>{h(!1),setTimeout(()=>{e?.(!1)},0)},onPost:(v,B)=>{C(v,B)}})]})}Array.from({length:12},(e,t)=>({id:`friend-${t}`,name:`Friend ${t+1}`,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=friend${t}`,major:"Computer Science",mutualFriends:Math.floor(Math.random()*20),compatibility:Math.random()>.5?Math.floor(Math.random()*30+70):void 0}));Array.from({length:3},(e,t)=>({id:`request-${t}`,name:`User ${t+1}`,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=request${t}`,major:"Engineering",mutualFriends:Math.floor(Math.random()*10)}));function yl({onNavigateToProfile:e}={}){Le();const t=pe(),[r,o]=a.useState("requests"),[s,l]=a.useState([]),[c,i]=a.useState([]),[u,d]=a.useState(!0),[h,m]=a.useState(null);a.useEffect(()=>{g()},[t,r]);const g=async()=>{if(!t){d(!1);return}try{if(d(!0),r==="friends"){const w=((await ir(t)).friendships||[]).filter(y=>y.friend_id&&y.friend).map(y=>{const j=y.friend||{};return{id:j.id||y.friend_id,name:j.name||"Unknown",avatar_url:j.profilePicture||j.photos?.[0]||`https://api.dicebear.com/7.x/avataaars/svg?seed=${j.id||y.friend_id}`,major:j.major||"Student",mutualFriends:0,compatibility:j.bondPrint?Math.floor(Math.random()*30+70):void 0}});l(w)}else{const w=((await hi(t)).friendships||[]).filter(y=>y.friend_id&&y.friend).map(y=>{const j=y.friend||{};return{id:j.id||y.friend_id,requestId:y.id,name:j.name||"Unknown",avatar_url:j.profilePicture||j.photos?.[0]||`https://api.dicebear.com/7.x/avataaars/svg?seed=${j.id||y.friend_id}`,major:j.major||"Student",mutualFriends:0}});i(w)}}catch(f){const p=f;O.error("Failed to load data:",p),k.error(p.message||"Failed to load data")}finally{d(!1)}},x=async f=>{const p=c.find(w=>w.id===f);if(!(!p||!t))try{m(f),await pi(p.requestId||f,t),k.success(`You're now friends with ${p.name}!`),i(c.filter(w=>w.id!==f)),l([...s,p]),await g()}catch(w){const y=w;O.error("Failed to accept request:",y),k.error(y.message||"Failed to accept request")}finally{m(null)}},b=async f=>{const p=c.find(w=>w.id===f);if(!(!p||!t))try{m(f),await xi(p.requestId||f,t),k.success("Request rejected"),i(c.filter(w=>w.id!==f))}catch(w){const y=w;O.error("Failed to reject request:",y),k.error(y.message||"Failed to reject request")}finally{m(null)}};return n.jsxs("div",{className:"min-h-screen pb-20",style:{background:"var(--gradient-background)"},children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-lg border-b",style:{borderColor:"#E8E8F0",padding:"16px 20px"},children:n.jsx("h1",{className:"text-2xl font-bold",style:{fontFamily:"'Outfit', sans-serif",fontSize:"28px",fontWeight:700,color:"#2D2D2D"},children:"Friends"})}),n.jsx("div",{className:"sticky bg-white border-b-2",style:{top:"60px",borderColor:"#E8E8F0",zIndex:40},children:n.jsx("div",{className:"flex",children:[{id:"friends",label:"My Friends"},{id:"requests",label:"Requests"},{id:"suggestions",label:"Suggestions"}].map(f=>n.jsxs("button",{onClick:()=>o(f.id),className:"flex-1 py-4 text-center text-sm font-semibold transition-all relative",style:{color:r===f.id?"#FF6B6B":"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"15px",fontWeight:600},children:[f.label,r===f.id&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5",style:{background:"linear-gradient(90deg, #FF6B6B, #FF8E8E)"}})]},f.id))})}),n.jsxs("div",{className:"overflow-y-auto",style:{height:"calc(100vh - 60px - 57px - 80px)",padding:"20px"},children:[r==="requests"&&n.jsx("div",{className:"rounded-2xl p-5 mb-5",style:{background:"linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(167, 139, 250, 0.1))",border:"2px solid rgba(255, 107, 107, 0.2)"},children:n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-extrabold mb-1",style:{background:"linear-gradient(135deg, #FF6B6B, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontSize:"24px",fontWeight:800},children:"247"}),n.jsx("div",{className:"text-xs font-semibold",style:{color:"#6B6B6B",fontSize:"12px"},children:"Friends"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-extrabold mb-1",style:{background:"linear-gradient(135deg, #FF6B6B, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontSize:"24px",fontWeight:800},children:c.length}),n.jsx("div",{className:"text-xs font-semibold",style:{color:"#6B6B6B",fontSize:"12px"},children:"Pending"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-extrabold mb-1",style:{background:"linear-gradient(135deg, #FF6B6B, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontSize:"24px",fontWeight:800},children:"89"}),n.jsx("div",{className:"text-xs font-semibold",style:{color:"#6B6B6B",fontSize:"12px"},children:"Mutual"})]})]})}),r==="friends"?n.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.map(f=>n.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden hover:shadow-md transition-all",style:{borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-sm)"},children:[n.jsxs("div",{className:"relative aspect-square",style:{background:"var(--gradient-accent)"},children:[n.jsx("img",{src:f.avatar_url,alt:f.name,className:"w-full h-full object-cover"}),f.compatibility&&n.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-lg text-white text-xs font-bold flex items-center gap-1",style:{background:"var(--gradient-accent)",backdropFilter:"blur(8px)",borderRadius:"var(--radius-md)",fontSize:"var(--font-size-xs)",fontWeight:"var(--font-weight-bold)",boxShadow:"var(--shadow-md)"},children:[n.jsx(Te,{className:"w-3 h-3 fill-current"}),f.compatibility,"%"]})]}),n.jsxs("div",{className:"p-3 text-center",style:{padding:"var(--space-3)"},children:[n.jsx("h3",{className:"font-bold text-sm mb-1 truncate",style:{color:"var(--color-text-primary)",fontFamily:"var(--font-body)",fontSize:"var(--font-size-caption)",fontWeight:"var(--font-weight-bold)"},children:f.name}),n.jsx("p",{className:"text-xs text-gray-600 truncate",style:{color:"var(--color-text-secondary)",fontFamily:"var(--font-body)",fontSize:"var(--font-size-xs)"},children:f.major}),n.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--color-text-tertiary)",fontFamily:"var(--font-body)",fontSize:"var(--font-size-xs)"},children:[f.mutualFriends," mutual"]})]})]},f.id))}):r==="requests"?n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold",style:{fontFamily:"'Outfit', sans-serif",fontSize:"18px",fontWeight:700,color:"#2D2D2D"},children:"Connection Requests"}),n.jsx("button",{className:"text-sm font-semibold",style:{color:"#FF6B6B",fontSize:"14px",fontWeight:600},children:"See all"})]}),n.jsx("div",{className:"space-y-3",children:c.length===0?n.jsx("div",{className:"bg-white rounded-2xl p-4 text-center",style:{borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:n.jsx("p",{className:"text-sm",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"14px"},children:"No new friend requests."})}):c.map(f=>n.jsxs("div",{className:"bg-white rounded-2xl p-4 flex items-start gap-3 transition-all hover:shadow-md",style:{borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",animation:"slideIn 0.3s ease-out"},children:[n.jsx("style",{children:`
                      @keyframes slideIn {
                        from {
                          opacity: 0;
                          transform: translateX(-20px);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0);
                        }
                      }
                    `}),n.jsx("div",{className:"w-16 h-16 rounded-2xl flex-shrink-0 flex items-center justify-center text-3xl",style:{background:"linear-gradient(135deg, #667eea, #764ba2)",borderRadius:"16px"},children:f.avatar_url?n.jsx("img",{src:f.avatar_url,alt:f.name,className:"w-full h-full rounded-2xl object-cover"}):n.jsx("span",{children:"ðŸ‘¤"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[n.jsx("h3",{className:"text-base font-bold truncate",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"16px",fontWeight:700},children:f.name}),n.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-[10px]",style:{background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)"},children:"âœ“"})]}),n.jsx("p",{className:"text-sm mb-0.5",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"13px"},children:f.major||"Student"}),n.jsxs("p",{className:"text-xs font-semibold",style:{color:"#FF6B6B",fontFamily:"'Inter', sans-serif",fontSize:"12px",fontWeight:600},children:[f.mutualFriends," mutual friends"]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("button",{onClick:()=>x(f.id),disabled:h===f.id,className:"flex-1 py-2.5 px-4 rounded-xl text-white font-semibold transition-all hover:scale-105 disabled:opacity-60",style:{background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",borderRadius:"10px",fontSize:"14px",fontWeight:600,boxShadow:h!==f.id?"0 4px 12px rgba(255, 107, 107, 0.3)":"none"},children:h===f.id?n.jsx(_e,{className:"w-4 h-4 animate-spin mx-auto"}):"Accept"}),n.jsx("button",{onClick:()=>b(f.id),disabled:h===f.id,className:"flex-1 py-2.5 px-4 rounded-xl font-semibold transition-all hover:scale-105 disabled:opacity-60",style:{background:"white",color:"#6B6B6B",border:"2px solid #E8E8F0",borderRadius:"10px",fontSize:"14px",fontWeight:600},children:h===f.id?n.jsx(_e,{className:"w-4 h-4 animate-spin mx-auto"}):"Decline"})]})]})]},f.id))}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold",style:{fontFamily:"'Outfit', sans-serif",fontSize:"18px",fontWeight:700,color:"#2D2D2D"},children:"People You May Know"}),n.jsx("button",{className:"text-sm font-semibold",style:{color:"#FF6B6B",fontSize:"14px",fontWeight:600},children:"See all"})]}),n.jsx("div",{className:"space-y-3",children:[{name:"Alex Turner",reason:"Also in Computer Science",tags:["ðŸŽ® Gaming","ðŸ’» Coding"],emoji:"ðŸŽ¨"},{name:"Sofia Martinez",reason:"3 mutual friends",tags:["ðŸŽµ Music","ðŸ“š Reading"],emoji:"ðŸŽ­"},{name:"Ryan Lee",reason:"Same graduation year",tags:["âš½ Sports","ðŸŽ¬ Movies"],emoji:"âš¡"}].map((f,p)=>n.jsxs("div",{className:"bg-white rounded-2xl p-4 flex items-center gap-3 transition-all hover:shadow-md hover:-translate-y-0.5",style:{borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-2xl flex-shrink-0",style:{background:"linear-gradient(135deg, #4ECDC4, #44A08D)",borderRadius:"14px"},children:f.emoji}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-bold mb-0.5",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"15px",fontWeight:700},children:f.name}),n.jsx("p",{className:"text-xs mb-1.5",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"12px"},children:f.reason}),n.jsx("div",{className:"flex gap-1 flex-wrap",children:f.tags.map((w,y)=>n.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-semibold",style:{background:"rgba(255, 107, 107, 0.1)",color:"#FF6B6B",borderRadius:"6px",fontSize:"11px",fontWeight:600},children:w},y))})]}),n.jsx("button",{className:"px-4 py-2 rounded-xl text-white font-semibold whitespace-nowrap transition-all hover:scale-105",style:{background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",borderRadius:"10px",fontSize:"13px",fontWeight:600,boxShadow:"0 4px 12px rgba(255, 107, 107, 0.3)"},children:"Connect"})]},p))})]})]}):n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{style:{color:"#6B6B6B"},children:"Suggestions coming soon!"})})]})]})}function vl({onNavigateToProfile:e}={}){Le();const t=pe(),[r,o]=a.useState([]),[s,l]=a.useState(!0),[c,i]=a.useState("");a.useEffect(()=>{(async()=>{if(!t){l(!1),o([]);return}try{l(!0);const g=((await yi(t)).chats||[]).map(x=>{const b=x.otherUser;return{id:x.chatId||x.id,name:b?.name||"Unknown",avatar_url:b?.profilePicture||b?.photos?.[0]||`https://api.dicebear.com/7.x/avataaars/svg?seed=${x.chatId||x.id}`,lastMessage:x.lastMessage||"",timestamp:x.lastMessageTimestamp||x.timestamp||new Date().toISOString(),unread:x.unreadCount||x.unread||0,isOnline:!1}});o(g)}catch(h){const m=h;O.error("Failed to load conversations:",m),m.message?.includes("401")||m.message?.includes("Unauthorized")?(O.warn("Authentication error loading conversations"),o([])):m.message?.includes("Failed to fetch")||m.name==="TypeError"?(O.warn("Network error loading conversations"),o([])):(k.error(m.message||"Failed to load conversations"),o([]))}finally{l(!1)}})()},[t]);const u=r.filter(d=>d.name.toLowerCase().includes(c.toLowerCase()));return n.jsxs("div",{className:"min-h-screen",style:{background:"var(--gradient-background)"},children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur-lg border-b",style:{borderColor:"#E8E8F0",padding:"16px 20px"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold",style:{fontFamily:"'Outfit', sans-serif",fontSize:"28px",fontWeight:700,color:"#2D2D2D"},children:"Messages"}),n.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center border transition-all hover:border-pink-500 hover:scale-105",style:{background:"white",borderColor:"#E8E8F0"},children:n.jsx(Vt,{className:"w-5 h-5",style:{color:"#2D2D2D"}})})]})}),n.jsx("div",{className:"bg-white border-b",style:{borderColor:"#E8E8F0",padding:"12px 20px"},children:n.jsxs("div",{className:"relative",children:[n.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5",style:{color:"#9B9B9B"}}),n.jsx("input",{type:"text",placeholder:"Search messages...",value:c,onChange:d=>i(d.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border-2 focus:outline-none transition-all",style:{background:"#F3F4FF",borderColor:"transparent",color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"15px"},onFocus:d=>{d.target.style.borderColor="#FF6B6B",d.target.style.background="white",d.target.style.boxShadow="0 0 0 4px rgba(255, 107, 107, 0.1)"},onBlur:d=>{d.target.style.borderColor="transparent",d.target.style.background="#F3F4FF",d.target.style.boxShadow="none"}})]})}),n.jsxs("div",{style:{height:"calc(100vh - 72px - 61px - 80px)",overflowY:"auto",WebkitOverflowScrolling:"touch"},children:[n.jsxs("div",{className:"mx-5 mt-4 mb-4 p-4 rounded-2xl flex items-center gap-3 cursor-pointer transition-all hover:shadow-md hover:-translate-y-0.5",style:{background:"linear-gradient(135deg, rgba(167, 139, 250, 0.1), rgba(78, 205, 196, 0.1))",border:"2px solid rgba(167, 139, 250, 0.3)",borderRadius:"16px"},children:[n.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl flex-shrink-0",style:{background:"linear-gradient(135deg, #A78BFA, #4ECDC4)",borderRadius:"12px"},children:"âœ¨"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-bold mb-0.5",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"15px",fontWeight:700},children:"Link - AI Assistant"}),n.jsx("p",{className:"text-xs",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"13px"},children:"Find study partners, roommates & more"})]}),n.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:n.jsx("path",{d:"M9 5l7 7-7 7",stroke:"#A78BFA",strokeWidth:"2",strokeLinecap:"round"})})]}),s?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(_e,{className:"w-8 h-8 animate-spin",style:{color:"#FF6B6B"}})}):u.length===0?n.jsxs("div",{className:"text-center py-12 px-4",children:[n.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{background:"rgba(255, 107, 107, 0.1)"},children:n.jsx(ct,{className:"w-10 h-10",style:{color:"#FF6B6B"}})}),n.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"#2D2D2D",fontFamily:"'Outfit', sans-serif",fontSize:"22px",fontWeight:700},children:c?"No messages found":"No conversations yet"}),n.jsx("p",{className:"text-sm",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"15px"},children:c?"Try searching for something else":"Start a conversation with someone!"})]}):n.jsxs("div",{children:[n.jsx("div",{className:"px-5 py-4 pb-2 text-xs font-bold uppercase tracking-wider",style:{color:"#9B9B9B",fontFamily:"'Inter', sans-serif",fontSize:"13px",fontWeight:700,letterSpacing:"0.5px",padding:"16px 20px 8px"},children:"Recent"}),u.filter(d=>d.unread>0).map(d=>n.jsxs("button",{className:"w-full flex items-center gap-3 transition-all hover:bg-pink-50 border-b",style:{borderColor:"#F3F4FF",background:d.unread>0?"rgba(255, 107, 107, 0.03)":"transparent",padding:"12px 20px"},children:[n.jsxs("div",{className:"relative flex-shrink-0",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-2xl",style:{background:"linear-gradient(135deg, #667eea, #764ba2)",borderRadius:"14px",width:"56px",height:"56px"},children:d.avatar_url?n.jsx("img",{src:d.avatar_url,alt:d.name,className:"w-full h-full rounded-2xl object-cover"}):n.jsx("span",{children:"ðŸ‘¤"})}),d.isOnline&&n.jsx("div",{className:"absolute bottom-0.5 right-0.5 rounded-full border-2 border-white",style:{background:"#6EE7B7",width:"14px",height:"14px",bottom:"2px",right:"2px"}})]}),n.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("h3",{className:"text-sm font-bold truncate",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"15px",fontWeight:700},children:d.name}),n.jsx("span",{className:"text-xs flex-shrink-0 ml-2",style:{color:"#9B9B9B",fontFamily:"'Inter', sans-serif",fontSize:"12px"},children:$e(new Date(d.timestamp),{addSuffix:!0}).replace("about ","").replace(" ago","")})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm truncate",style:{color:d.unread>0?"#2D2D2D":"#6B6B6B",fontWeight:d.unread>0?600:400,fontFamily:"'Inter', sans-serif",fontSize:"14px"},children:d.lastMessage}),d.unread>0&&n.jsx("span",{className:"flex-shrink-0 ml-2 rounded-full text-white text-xs font-bold flex items-center justify-center",style:{background:"#FF6B6B",fontFamily:"'Inter', sans-serif",fontSize:"11px",fontWeight:700,width:"24px",height:"24px"},children:d.unread})]})]})]},d.id)),n.jsx("div",{className:"px-5 py-4 pb-2 text-xs font-bold uppercase tracking-wider",style:{color:"#9B9B9B",fontFamily:"'Inter', sans-serif",fontSize:"13px",fontWeight:700,letterSpacing:"0.5px",padding:"16px 20px 8px"},children:"Earlier"}),u.filter(d=>d.unread===0).map(d=>n.jsxs("button",{className:"w-full flex items-center gap-3 transition-all hover:bg-pink-50 border-b",style:{borderColor:"#F3F4FF",padding:"12px 20px"},children:[n.jsxs("div",{className:"relative flex-shrink-0",children:[n.jsx("div",{className:"rounded-2xl flex items-center justify-center text-2xl",style:{background:"linear-gradient(135deg, #667eea, #764ba2)",borderRadius:"14px",width:"56px",height:"56px"},children:d.avatar_url?n.jsx("img",{src:d.avatar_url,alt:d.name,className:"w-full h-full rounded-2xl object-cover"}):n.jsx("span",{children:"ðŸ‘¤"})}),d.isOnline&&n.jsx("div",{className:"absolute rounded-full border-2 border-white",style:{background:"#6EE7B7",width:"14px",height:"14px",bottom:"2px",right:"2px"}})]}),n.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("h3",{className:"text-sm font-bold truncate",style:{color:"#2D2D2D",fontFamily:"'Inter', sans-serif",fontSize:"15px",fontWeight:700},children:d.name}),n.jsx("span",{className:"text-xs flex-shrink-0 ml-2",style:{color:"#9B9B9B",fontFamily:"'Inter', sans-serif",fontSize:"12px"},children:$e(new Date(d.timestamp),{addSuffix:!0}).replace("about ","").replace(" ago","")})]}),n.jsx("p",{className:"text-sm truncate",style:{color:"#6B6B6B",fontFamily:"'Inter', sans-serif",fontSize:"14px"},children:d.lastMessage})]})]},d.id))]})]}),n.jsx("button",{className:"fixed right-5 rounded-full flex items-center justify-center text-white transition-all hover:scale-110 z-50",style:{bottom:"100px",width:"56px",height:"56px",background:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",boxShadow:"0 8px 20px rgba(255, 107, 107, 0.4)"},children:n.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:n.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"white",strokeWidth:"2"})})})]})}function wl({profileId:e,profileName:t}){const[r,o]=a.useState(!1),s=a.useRef(null);a.useEffect(()=>{const i=u=>{s.current&&!s.current.contains(u.target)&&o(!1)};return r&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[r]);const l=async()=>{const i=`${window.location.origin}/profile/${e}`;if(navigator.share)try{await navigator.share({title:`${t}'s Profile`,text:`Check out ${t}'s profile on Bonded`,url:i}),o(!1)}catch(u){u.name!=="AbortError"&&c()}else c()},c=async()=>{const i=`${window.location.origin}/profile/${e}`;try{await navigator.clipboard.writeText(i),k.success("Profile link copied!"),o(!1)}catch{k.error("Failed to copy link")}};return n.jsxs("div",{style:{position:"relative"},ref:s,children:[n.jsx("button",{onClick:()=>o(!r),style:{padding:"0.5rem",borderRadius:"9999px",border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Vt,{className:"w-5 h-5",style:{color:"#1f2937"}})}),r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"fixed",inset:0,zIndex:9998},onClick:()=>o(!1)}),n.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:"white",borderRadius:"0.75rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",padding:"0.5rem",minWidth:"160px",zIndex:9999},children:[n.jsxs("button",{onClick:l,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"0.5rem",border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151",transition:"background 0.2s"},onMouseEnter:i=>i.currentTarget.style.background="#f3f4f6",onMouseLeave:i=>i.currentTarget.style.background="transparent",children:[n.jsx(Ut,{className:"w-4 h-4"}),"Share Profile"]}),n.jsxs("button",{onClick:c,style:{width:"100%",padding:"0.75rem 1rem",borderRadius:"0.5rem",border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151",transition:"background 0.2s"},onMouseEnter:i=>i.currentTarget.style.background="#f3f4f6",onMouseLeave:i=>i.currentTarget.style.background="transparent",children:[n.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),n.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),"Copy Link"]})]})]})]})}function jl({onBack:e,userId:t}){const{userProfile:r,accessToken:o}=Ht(),[s,l]=a.useState(!1),[c,i]=a.useState(null),[u,d]=a.useState("posts"),[h,m]=a.useState(!1),[g,x]=a.useState(!1),[b,f]=a.useState(""),[p,w]=a.useState(""),[y,j]=a.useState([]),[N,C]=a.useState(""),[R,E]=a.useState([]),[v,B]=a.useState([]),[P,A]=a.useState(!1),[D,$]=a.useState(!1),[ae,ie]=a.useState(!1),S=!t||t===r?.id;a.useEffect(()=>{I()},[t,r?.id,o]),a.useEffect(()=>{u==="posts"&&c?W():u==="connections"&&c&&V()},[u,c]);const I=async()=>{if(!o){console.warn("No access token available for profile load"),l(!1);return}try{l(!0);const F=t||r?.id;if(!F){l(!1);return}const _=await fi(F,o);i(_),f(_.bio||""),w(_.bio||""),j(_.interests||[])}catch(F){console.error("Failed to load profile:",F),F.message?.includes("401")||F.message?.includes("Unauthorized")?(console.warn("Authentication error - token may be expired"),r&&(i(r),f(r.bio||""),w(r.bio||""),j(r.interests||[]))):k.error(F.message||"Failed to load profile")}finally{l(!1)}},W=async()=>{if(!(!o||!c))try{$(!0);const F=t||r?.id,M=(await lr(o)).posts||[],Z=F?M.filter(Q=>Q.authorId===F):M,yt=["linear-gradient(to bottom right, #fb7185, #ec4899)","linear-gradient(to bottom right, #a855f7, #3b82f6)","linear-gradient(to bottom right, #ec4899, #a855f7)","linear-gradient(to bottom right, #f59e0b, #f97316)","linear-gradient(to bottom right, #10b981, #3b82f6)","linear-gradient(to bottom right, #ec4899, #f97316)"],gr=Z.slice(0,9).map((Q,br)=>({id:Q.id,gradient:yt[br%yt.length],likes:Q.like_count||Q.likes||0,comments:Q.comment_count||Q.comments||0,timestamp:Q.created_at?new Date(Q.created_at).toLocaleDateString():"Recently"}));E(gr)}catch(F){const _=F;O.error("Failed to load posts:",_),_.message?.includes("401")||_.message?.includes("Unauthorized")?(O.warn("Authentication error loading posts"),E([])):_.message?.includes("Failed to fetch")||_.name==="TypeError"?(O.warn("Network error loading posts"),E([])):(k.error(_.message||"Failed to load posts"),E([]))}finally{$(!1)}},V=async()=>{if(!(!o||!c))try{ie(!0);const J=((await ir(o))?.friendships||[]).filter(M=>M.friend).map(M=>({id:M.friend.id,name:M.friend.name,profilePicture:M.friend.profilePicture||M.friend.photos?.[0]||`https://api.dicebear.com/7.x/avataaars/svg?seed=${M.friend.id}`,year:M.friend.year||M.friend.yearLevel||"Student",major:M.friend.major||"Undeclared",mutualFriends:M.friend.mutualFriendsCount||0}));B(J)}catch(F){console.error("Failed to load connections:",F),k.error(F.message||"Failed to load connections"),B([])}finally{ie(!1)}},H=async()=>{if(!(!o||!S))try{const F=r?.id||"";await tt(F,{bio:p},o),f(p),m(!1),await I(),k.success("Bio updated")}catch(F){const _=F;O.error("Failed to update bio:",_),_.message?.includes("401")||_.message?.includes("Unauthorized")?k.error("Please log in again to update your bio"):_.message?.includes("Failed to fetch")||_.name==="TypeError"?k.error("Network error. Please check your connection and try again."):k.error(_.message||"Failed to update bio")}},T=()=>{w(b),m(!1)},bt=async()=>{if(!N.trim()||y.length>=10||!o||!S)return;const F=[...y],_=[...y,N.trim()];j(_),C("");try{const J=r?.id||"";await tt(J,{interests:_},o),await I(),k.success("Interest added")}catch(J){const M=J;O.error("Failed to add interest:",M),j(F),C(N.trim()),M.message?.includes("401")||M.message?.includes("Unauthorized")?k.error("Please log in again to add interests"):M.message?.includes("Failed to fetch")||M.name==="TypeError"?k.error("Network error. Please check your connection and try again."):k.error(M.message||"Failed to add interest")}},hr=async F=>{if(!o||!S)return;const _=[...y],J=y.filter((M,Z)=>Z!==F);j(J);try{const M=r?.id||"";await tt(M,{interests:J},o),await I(),k.success("Interest removed")}catch(M){const Z=M;O.error("Failed to remove interest:",Z),j(_),Z.message?.includes("401")||Z.message?.includes("Unauthorized")?k.error("Please log in again to remove interests"):Z.message?.includes("Failed to fetch")||Z.name==="TypeError"?k.error("Network error. Please check your connection and try again."):k.error(Z.message||"Failed to remove interest")}},pr=async()=>{!o||S||(A(!P),k.success(P?"Disconnected":"Connection request sent"))};if(s||!c)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff, #fed7d7)"},children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 border-4 border-pink-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{style:{color:"#6b7280"},children:"Loading profile..."})]})});const z={name:c.name||r?.name||"User",username:`@${(c.name||r?.name||"user").toLowerCase().replace(/\s+/g,"")}`,year:c.year||c.yearLevel||r?.year||"Student",major:c.major||r?.major||"",location:c.school||r?.school||"University",joinDate:c.created_at?`Joined ${new Date(c.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`:"Joined recently",connections:c.friendsCount||v.length||0,mutualConnections:c.mutualFriendsCount||0,posts:R.length,isPostsPublic:c.isPostsPublic!==!1,profilePicture:c.profilePicture||c.photos?.[0]||r?.profilePicture||`https://api.dicebear.com/7.x/avataaars/svg?seed=${c.id||r?.id}`},xr=S||z.isPostsPublic;return n.jsxs("div",{className:"min-h-screen pb-20",style:{background:"linear-gradient(to bottom right, #fce7f3, #f3e8ff, #fed7d7)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[n.jsxs("div",{className:"sticky top-0 z-50",style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(12px)",padding:"0.75rem 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #f3f4f6"},children:[S?n.jsx("div",{style:{width:"40px"}}):n.jsx("button",{onClick:e,style:{padding:"0.5rem",borderRadius:"9999px",border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Dr,{className:"w-5 h-5",style:{color:"#1f2937"}})}),n.jsx("h1",{style:{fontWeight:"bold",fontSize:"1.125rem",margin:0,color:"#1f2937"},children:z.name}),n.jsx(wl,{profileId:c.id||r?.id||"",profileName:z.name})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("div",{style:{height:"10rem",background:"linear-gradient(to bottom right, #fb7185, #ec4899, #a855f7)"}}),n.jsx("div",{style:{position:"absolute",bottom:"-4rem",left:"1rem"},children:n.jsxs("div",{style:{width:"8rem",height:"8rem",borderRadius:"9999px",background:z.profilePicture?.startsWith("http")?`url(${z.profilePicture}) center/cover`:"linear-gradient(to bottom right, #fdba74, #c084fc)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem",border:"4px solid white",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[!z.profilePicture?.startsWith("http")&&"ðŸŽ“",z.profilePicture?.startsWith("http")&&n.jsx("img",{src:z.profilePicture,alt:z.name,style:{width:"100%",height:"100%",objectFit:"cover"}})]})})]}),n.jsxs("div",{style:{padding:"5rem 1rem 1.5rem"},children:[n.jsxs("div",{style:{marginBottom:"0.75rem"},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.25rem",color:"#1f2937"},children:z.name}),n.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:z.username})]}),n.jsx("div",{style:{marginBottom:"1rem"},children:h?n.jsxs("div",{style:{background:"white",borderRadius:"1rem",padding:"1rem",border:"2px solid #fb7185"},children:[n.jsx("textarea",{value:p,onChange:F=>w(F.target.value),maxLength:150,style:{width:"100%",minHeight:"80px",border:"none",outline:"none",resize:"none",fontFamily:"inherit",fontSize:"0.875rem",color:"#374151"},placeholder:"Write a bio..."}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem"},children:[n.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[p.length,"/150"]}),n.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsx("button",{onClick:T,style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",background:"#f3f4f6",color:"#374151",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),n.jsx("button",{onClick:H,style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",background:"linear-gradient(to right, #fb7185, #ec4899)",color:"white",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:"Save"})]})]})]}):n.jsxs("div",{style:{position:"relative"},children:[n.jsx("p",{style:{color:"#374151",lineHeight:"1.625",paddingRight:S?"2rem":0},children:b||"No bio yet"}),S&&n.jsx("button",{onClick:()=>{m(!0),w(b)},style:{position:"absolute",top:0,right:0,padding:"0.25rem",border:"none",background:"transparent",color:"#fb7185",cursor:"pointer"},children:n.jsx(wt,{className:"w-4 h-4"})})]})}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#4b5563",marginBottom:"0.5rem"},children:[n.jsx(rt,{className:"w-4 h-4"}),n.jsxs("span",{children:[z.year," â€¢ ",z.major]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#4b5563",marginBottom:"0.5rem"},children:[n.jsx(Lt,{className:"w-4 h-4"}),n.jsx("span",{children:z.location})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#4b5563"},children:[n.jsx(Ir,{className:"w-4 h-4"}),n.jsx("span",{children:z.joinDate})]})]}),n.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"1.5rem",paddingBottom:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontWeight:"bold",fontSize:"1.125rem",color:"#1f2937"},children:z.posts}),n.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Posts"})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontWeight:"bold",fontSize:"1.125rem",color:"#1f2937"},children:z.connections}),n.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Connections"})]}),!S&&n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontWeight:"bold",fontSize:"1.125rem",color:"#1f2937"},children:z.mutualConnections}),n.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Mutual"})]})]}),!S&&n.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem"},children:[n.jsx("button",{onClick:pr,style:{flex:1,padding:"0.75rem",borderRadius:"9999px",fontWeight:"600",border:"none",cursor:"pointer",background:P?"#f3f4f6":"linear-gradient(to right, #fb7185, #ec4899)",color:P?"#374151":"white",boxShadow:P?"none":"0 10px 15px -3px rgba(251, 113, 133, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:P?n.jsxs(n.Fragment,{children:[n.jsx(Ar,{className:"w-5 h-5"}),"Connected"]}):n.jsxs(n.Fragment,{children:[n.jsx(_r,{className:"w-5 h-5"}),"Connect"]})}),n.jsx("button",{style:{padding:"0.75rem 1.5rem",borderRadius:"9999px",fontWeight:"600",border:"none",cursor:"pointer",background:"#f3f4f6",color:"#374151",display:"flex",alignItems:"center",gap:"0.5rem"},children:n.jsx(ct,{className:"w-5 h-5"})})]}),n.jsxs("div",{style:{display:"flex",borderBottom:"2px solid #e5e7eb",marginBottom:"1.5rem"},children:[n.jsxs("button",{onClick:()=>d("posts"),style:{flex:1,padding:"0.75rem",border:"none",background:"transparent",cursor:"pointer",borderBottom:u==="posts"?"2px solid #fb7185":"2px solid transparent",color:u==="posts"?"#fb7185":"#6b7280",fontWeight:u==="posts"?"600":"400",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"-2px"},children:[n.jsx(Tr,{className:"w-5 h-5"}),"Posts"]}),n.jsxs("button",{onClick:()=>d("connections"),style:{flex:1,padding:"0.75rem",border:"none",background:"transparent",cursor:"pointer",borderBottom:u==="connections"?"2px solid #fb7185":"2px solid transparent",color:u==="connections"?"#fb7185":"#6b7280",fontWeight:u==="connections"?"600":"400",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"-2px"},children:[n.jsx(Mr,{className:"w-5 h-5"}),"Connections"]}),n.jsxs("button",{onClick:()=>d("interests"),style:{flex:1,padding:"0.75rem",border:"none",background:"transparent",cursor:"pointer",borderBottom:u==="interests"?"2px solid #fb7185":"2px solid transparent",color:u==="interests"?"#fb7185":"#6b7280",fontWeight:u==="interests"?"600":"400",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"-2px"},children:[n.jsx(Te,{className:"w-5 h-5"}),"Interests"]})]}),u==="posts"&&n.jsx("div",{children:xr?D?n.jsx("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#6b7280"},children:n.jsx("p",{children:"Loading posts..."})}):R.length===0?n.jsx("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#6b7280"},children:n.jsx("p",{children:"No posts yet"})}):n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.25rem"},children:R.map(F=>n.jsx("div",{style:{aspectRatio:"1",background:F.gradient,borderRadius:"0.5rem",cursor:"pointer",position:"relative",overflow:"hidden"},children:n.jsxs("div",{style:{position:"absolute",bottom:"0.5rem",left:"0.5rem",right:"0.5rem",display:"flex",gap:"0.75rem",color:"white",fontSize:"0.75rem",fontWeight:"500"},children:[n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx(Te,{className:"w-3 h-3"}),F.likes]}),n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[n.jsx(Or,{className:"w-3 h-3"}),F.comments]})]})},F.id))}):n.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ðŸ”’"}),n.jsx("p",{style:{fontWeight:"500",marginBottom:"0.5rem"},children:"Posts are Private"}),n.jsx("p",{style:{fontSize:"0.875rem"},children:"This user's posts are only visible to them"})]})}),u==="connections"&&n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:ae?n.jsx("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#6b7280"},children:n.jsx("p",{children:"Loading connections..."})}):v.length===0?n.jsx("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#6b7280"},children:n.jsx("p",{children:"No connections yet"})}):v.map(F=>n.jsxs("div",{style:{background:"white",borderRadius:"1rem",padding:"1rem",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",border:"1px solid #f3f4f6",cursor:"pointer"},children:[n.jsxs("div",{style:{width:"3rem",height:"3rem",borderRadius:"9999px",background:F.profilePicture?`url(${F.profilePicture}) center/cover`:"linear-gradient(to bottom right, #fdba74, #c084fc)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",flexShrink:0,overflow:"hidden"},children:[!F.profilePicture&&"ðŸ‘¤",F.profilePicture&&n.jsx("img",{src:F.profilePicture,alt:F.name,style:{width:"100%",height:"100%",objectFit:"cover"}})]}),n.jsxs("div",{style:{flex:1},children:[n.jsx("p",{style:{fontWeight:"600",fontSize:"0.875rem",marginBottom:"0.125rem",color:"#1f2937"},children:F.name}),n.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[F.year||"Student"," â€¢ ",F.major||"Undeclared"]}),F.mutualFriends!==void 0&&F.mutualFriends>0&&n.jsxs("p",{style:{fontSize:"0.75rem",color:"#fb7185",marginTop:"0.125rem"},children:[F.mutualFriends," mutual connections"]})]})]},F.id))}),u==="interests"&&n.jsxs("div",{children:[n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem"},children:y.map((F,_)=>n.jsxs("span",{style:{padding:"0.5rem 0.75rem",background:"white",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:"500",color:"#374151",border:"1px solid #e5e7eb",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[F,S&&g&&n.jsx("button",{onClick:()=>hr(_),style:{border:"none",background:"transparent",padding:0,cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center"},children:n.jsx(he,{className:"w-4 h-4"})})]},_))}),S&&n.jsx(n.Fragment,{children:g?n.jsxs("div",{style:{background:"white",borderRadius:"1rem",padding:"1rem",border:"2px solid #fb7185"},children:[n.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[n.jsx("input",{type:"text",value:N,onChange:F=>C(F.target.value),onKeyPress:F=>F.key==="Enter"&&bt(),placeholder:"Add an interest...",maxLength:20,style:{flex:1,padding:"0.5rem",border:"1px solid #e5e7eb",borderRadius:"0.5rem",fontSize:"0.875rem",outline:"none"}}),n.jsx("button",{onClick:bt,disabled:!N.trim()||y.length>=10,style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",background:N.trim()&&y.length<10?"linear-gradient(to right, #fb7185, #ec4899)":"#e5e7eb",color:"white",fontSize:"0.875rem",fontWeight:"500",cursor:N.trim()&&y.length<10?"pointer":"not-allowed"},children:"Add"})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[y.length,"/10 interests"]}),n.jsx("button",{onClick:()=>x(!1),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",background:"linear-gradient(to right, #fb7185, #ec4899)",color:"white",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:"Done"})]})]}):n.jsxs("button",{onClick:()=>x(!0),style:{width:"100%",padding:"0.75rem",borderRadius:"0.75rem",border:"2px dashed #e5e7eb",background:"white",color:"#6b7280",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[n.jsx(wt,{className:"w-4 h-4"}),"Edit Interests"]})})]})]})]})}const Sl=a.lazy(()=>Gr(()=>import("./LoveModeNew-BKKdG47O.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.LoveModeNew})));function Nl({onExit:e}){return n.jsx(a.Suspense,{fallback:n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("p",{children:"Loading dating mode..."})}),children:n.jsx(Sl,{onExit:e})})}function Cl(e,t=[]){let r=[];function o(l,c){const i=a.createContext(c);i.displayName=l+"Context";const u=r.length;r=[...r,c];const d=m=>{const{scope:g,children:x,...b}=m,f=g?.[e]?.[u]||i,p=a.useMemo(()=>b,Object.values(b));return n.jsx(f.Provider,{value:p,children:x})};d.displayName=l+"Provider";function h(m,g){const x=g?.[e]?.[u]||i,b=a.useContext(x);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[d,h]}const s=()=>{const l=r.map(c=>a.createContext(c));return function(i){const u=i?.[e]||l;return a.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return s.scopeName=e,[o,El(s,...t)]}function El(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=o.reduce((i,{useScope:u,scopeName:d})=>{const m=u(l)[`__scope${d}`];return{...i,...m}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}var kl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cr=kl.reduce((e,t)=>{const r=qt(`Primitive.${t}`),o=a.forwardRef((s,l)=>{const{asChild:c,...i}=s,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...i,ref:l})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),xt="Progress",gt=100,[Fl]=Cl(xt),[Pl,Rl]=Fl(xt),dr=a.forwardRef((e,t)=>{const{__scopeProgress:r,value:o=null,max:s,getValueLabel:l=Bl,...c}=e;(s||s===0)&&!Wt(s)&&console.error(Dl(`${s}`,"Progress"));const i=Wt(s)?s:gt;o!==null&&!zt(o,i)&&console.error(Il(`${o}`,"Progress"));const u=zt(o,i)?o:null,d=We(u)?l(u,i):void 0;return n.jsx(Pl,{scope:r,value:u,max:i,children:n.jsx(cr.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":We(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":mr(u,i),"data-value":u??void 0,"data-max":i,...c,ref:t})})});dr.displayName=xt;var ur="ProgressIndicator",fr=a.forwardRef((e,t)=>{const{__scopeProgress:r,...o}=e,s=Rl(ur,r);return n.jsx(cr.div,{"data-state":mr(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...o,ref:t})});fr.displayName=ur;function Bl(e,t){return`${Math.round(e/t*100)}%`}function mr(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function We(e){return typeof e=="number"}function Wt(e){return We(e)&&!isNaN(e)&&e>0}function zt(e,t){return We(e)&&!isNaN(e)&&e<=t&&e>=0}function Dl(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gt}\`.`}function Il(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gt} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Al=dr,_l=fr;function Tl({className:e,value:t,...r}){return n.jsx(Al,{"data-slot":"progress",className:X("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:n.jsx(_l,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const be=[{id:1,icon:$r,title:"Discover Your Campus",description:"Browse profiles of students at your school. Swipe through to find friends, roommates, study partners, and more!",color:"from-blue-500 to-purple-500"},{id:2,icon:ze,title:"Find Your People",description:"Use filters to find exactly what you're looking for - by major, year, interests, or goals.",color:"from-purple-500 to-pink-500"},{id:3,icon:Te,title:"Bond Print Matching",description:"Our AI analyzes compatibility to show you people you'll actually connect with. Higher scores = better matches!",color:"from-pink-500 to-red-500"},{id:4,icon:ct,title:"Start Conversations",description:"Send connection requests and chat with matches. Build your campus network one connection at a time.",color:"from-red-500 to-orange-500"},{id:5,icon:ye,title:"You're All Set!",description:"Start exploring and connecting with students on your campus. The more you use Bonded, the better your matches get!",color:"from-orange-500 to-yellow-500"}];function Ml({onComplete:e,onSkip:t}){const[r,o]=a.useState(0),[s,l]=a.useState(!1);a.useEffect(()=>{localStorage.getItem("hasSeenAppTutorial")==="true"&&(l(!0),e())},[e]);const c=()=>{r<be.length-1?o(r+1):i()},i=()=>{localStorage.setItem("hasSeenAppTutorial","true"),e()},u=()=>{localStorage.setItem("hasSeenAppTutorial","true"),t()};if(s)return null;const d=be[r],h=d.icon,m=(r+1)/be.length*100;return n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx(Ae.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"max-w-md w-full",children:n.jsx(Yr,{className:"border-2 border-purple-200 shadow-2xl",children:n.jsxs(qr,{className:"p-6",children:[n.jsx("div",{className:"flex justify-end mb-4",children:n.jsx(Y,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8",children:n.jsx(he,{className:"w-4 h-4"})})}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("span",{className:"text-xs text-gray-600",children:["Step ",r+1," of ",be.length]}),n.jsxs("span",{className:"text-xs font-medium text-purple-600",children:[Math.round(m),"%"]})]}),n.jsx(Tl,{value:m,className:"h-2"})]}),n.jsx(Wr,{mode:"wait",children:n.jsxs(Ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"text-center",children:[n.jsx("div",{className:`w-20 h-20 bg-gradient-to-br ${d.color} rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg`,children:n.jsx(h,{className:"w-10 h-10 text-white"})}),n.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-900",children:d.title}),n.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:d.description})]},r)}),n.jsxs("div",{className:"flex gap-3",children:[r>0&&n.jsx(Y,{variant:"outline",onClick:()=>o(r-1),className:"flex-1",children:"Back"}),n.jsx(Y,{onClick:c,className:`flex-1 bg-gradient-to-r ${d.color} text-white`,children:r===be.length-1?"Get Started":n.jsxs(n.Fragment,{children:["Next",n.jsx(zr,{className:"w-4 h-4 ml-2"})]})})]})]})})})})}function Ol(e,t={}){if(!e)return"/Bonded_transparent_icon.png";if(e.includes("supabase.co/storage")){const r=new URLSearchParams;t.width&&r.append("width",t.width.toString()),t.height&&r.append("height",t.height.toString()),t.quality&&r.append("quality",t.quality.toString()),t.format&&r.append("format",t.format);const o=e.includes("?")?"&":"?";return`${e}${o}${r.toString()}`}return e.startsWith("data:")||e.startsWith("http"),e}function $l(e,t="medium"){return Ol(e,{...{small:{width:100,height:100},medium:{width:400,height:400},large:{width:800,height:800}}[t],quality:80,format:"webp"})}function Wl(){const{userProfile:e,accessToken:t,handleLogout:r}=Ht(),[o,s]=a.useState("discover"),[l,c]=a.useState(null),[i,u]=a.useState(!1),[d,h]=a.useState(!1),[m,g]=a.useState(0),[x,b]=a.useState(!1),[f,p]=a.useState(!1),[w,y]=a.useState(!0),[j,N]=a.useState(0);return a.useEffect(()=>{localStorage.getItem("hasSeenAppTutorial")||h(!0)},[]),a.useEffect(()=>{const C=document.querySelector("[data-content-area]");if(!C)return;const R=()=>{const E=C.scrollTop;E<10?y(!0):E>j&&E>100?y(!1):E<j&&y(!0),N(E)};return C.addEventListener("scroll",R,{passive:!0}),()=>C.removeEventListener("scroll",R)},[j]),$l(e?.profilePicture||e?.photos?.[0],"small"),n.jsxs(n.Fragment,{children:[d&&n.jsx(Ml,{onComplete:()=>h(!1),onSkip:()=>h(!1)}),n.jsxs("div",{className:"fixed inset-0 flex flex-col",style:{height:"100dvh",overflow:"hidden",background:"linear-gradient(180deg, #FAFAFF 0%, #F3F4FF 100%)"},children:[!1,n.jsx("div",{className:"flex-1 overflow-hidden",style:{paddingTop:"0"},children:n.jsxs(Jr,{activeTab:o,onTabChange:s,hideNavigation:i||x,onUnreadCountChange:g,onPostComposerOpen:()=>{o==="forum"?b(C=>{const R=!C;return R||p(!1),R}):(s("forum"),p(!0),b(!0))},children:[o==="discover"&&n.jsx(Ni,{onProfileDetailOpen:u,onNavigateToProfile:C=>{c({view:"profile",userId:C}),s("profile")}}),o==="matches"&&n.jsx(yl,{onNavigateToProfile:()=>s("profile")}),o==="messages"&&n.jsx(vl,{onNavigateToProfile:()=>s("profile")}),o==="forum"&&n.jsx(bl,{onPostComposerChange:C=>{x!==C&&(b(C),C||p(!1))},openComposer:f,onComposerOpened:()=>{p(!1)},onNavigateToProfile:()=>s("profile")}),o==="scrapbook"&&n.jsx(Nl,{onExit:()=>s("discover")}),o==="profile"&&n.jsx(jl,{userId:l?.userId,onBack:()=>{c(null),s("discover")}})]})})]})]})}const Gl=Object.freeze(Object.defineProperty({__proto__:null,MainApp:Wl},Symbol.toStringTag,{value:"Module"}));export{lo as B,Gl as M};
