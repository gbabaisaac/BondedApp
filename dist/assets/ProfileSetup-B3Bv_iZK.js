import{r as o,j as e,R as se}from"./radix-vendor-D14C15Ff.js";import{C as j,e as v,m as cs,B as C,p as R}from"./index-M3q6TuVL.js";import{I as g}from"./input-D1hZyrkL.js";import{T as Ce}from"./textarea-C2zb-GuH.js";import{B as te}from"./badge-CnwWpSLx.js";import{P as ds}from"./progress-BDyDl-qk.js";import{L as d}from"./label-bXuO2QpB.js";import{G as ms,S as hs,a as I,b as us,X as ps,c as xs,H as ys,d as E,e as ae,f as Ue,g as ke,V as js,A as vs,h as gs}from"./icons-vendor-DY0DtMnS.js";import{b as n}from"./ui-vendor-BZRxtcfS.js";import{BondPrintQuiz as fs}from"./BondPrintQuiz-qODvI3pK.js";import{A as bs}from"./index-CppVJ9fv.js";import"./supabase-vendor-BE7OkBLE.js";import"./react-vendor-B2m46t8p.js";const Ns=["Harvard University","Yale University","Princeton University","Columbia University","University of Pennsylvania","Brown University","Dartmouth College","Cornell University","University of California, Berkeley","University of California, Los Angeles (UCLA)","University of Michigan","University of Virginia","University of North Carolina at Chapel Hill","University of California, San Diego","University of California, Irvine","University of California, Santa Barbara","University of California, Davis","University of Florida","Georgia Institute of Technology","University of Texas at Austin","University of Wisconsin-Madison","University of Illinois Urbana-Champaign","University of Washington","Stanford University","Massachusetts Institute of Technology (MIT)","Duke University","Northwestern University","Johns Hopkins University","Vanderbilt University","Rice University","Washington University in St. Louis","Emory University","Georgetown University","University of Southern California","Carnegie Mellon University","University of Notre Dame","Tufts University","New York University","Boston University","Case Western Reserve University","Williams College","Amherst College","Swarthmore College","Wellesley College","Pomona College","Bowdoin College","Claremont McKenna College","Middlebury College","Carleton College","Davidson College","Ohio State University","Penn State University","Michigan State University","Indiana University","University of Arizona","Arizona State University","University of Colorado Boulder","University of Maryland","Rutgers University","University of Minnesota","University of Iowa","Purdue University","University of Pittsburgh","Virginia Tech","Texas A&M University","University of Georgia","Florida State University","University of South Carolina","University of Alabama","Auburn University","University of Tennessee","University of Kentucky","Louisiana State University","University of Oklahoma","University of Kansas","University of Nebraska","University of Oregon","University of Utah","San Diego State University","TestUniversity","Other"];function Ss({value:m,onChange:F}){const[i,u]=o.useState(""),[h,a]=o.useState(""),r=Ns.filter(c=>c.toLowerCase().includes(i.toLowerCase()));return e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(ms,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"Select your school"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This helps us connect you with your campus community"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(g,{value:i,onChange:c=>u(c.target.value),placeholder:"Search for your school...",className:"pl-10"})]}),e.jsxs("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:[r.map(c=>e.jsx("button",{onClick:()=>{F(c),c!=="Other"&&a("")},className:`w-full text-left px-4 py-3 hover:bg-purple-50 transition-colors border-b last:border-b-0 ${m===c?"bg-purple-100 text-purple-700":""}`,children:c},c)),r.length===0&&e.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:'No schools found. Try searching differently or select "Other".'})]}),m==="Other"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(d,{htmlFor:"customSchool",children:"Enter your school name"}),e.jsx(g,{id:"customSchool",value:h,onChange:c=>a(c.target.value),placeholder:"Enter school name"})]}),m&&m!=="Other"&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Selected: "}),e.jsx("span",{className:"text-purple-700",children:m})]}),m==="Other"&&h&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Selected: "}),e.jsx("span",{className:"text-purple-700",children:h})]})]})})}const ws=["Art","Reading","Gaming","Music","Travel","Fitness","Cooking","Photography","Movies","Sports","Theater","Tech","Sustainability","Yoga","Events","Writing","Playing Music","Outdoors","Crafts","Food","Pets","Karaoke","Swimming","Cycling","Climbing","TV Shows","Board Games","Coffee","Wine","Trying New Foods"],Cs=["Outgoing","Introverted","Creative","Analytical","Empathetic","Ambitious","Chill","Organized","Spontaneous","Adventurous","Thoughtful","Humorous","Driven","Laid-back","Curious","Compassionate","Independent","Team Player","Leader","Supportive"],re=["Make Friends","Find a Roommate","Study Partner","Collaborate on Projects","Network","Event Buddy","Workout Partner","Dining Companion"],oe=["Maintain high GPA (3.5+)","Get into grad school","Land internships","Build portfolio/projects","Join research labs","Study abroad","Change major","Just graduate","Other"],le=["Join clubs/orgs","Play sports","Go to parties","Explore the city","Try new restaurants","Attend concerts/events","Outdoor activities","Gaming","Travel","Other"],Ae=["Computer Science","Engineering","Business","Psychology","Biology","English","Mathematics","Chemistry","Physics","Economics","Political Science","Communications","Art","Music","History","Philosophy","Sociology","Nursing","Education","Marketing","Finance","Architecture","Environmental Science","Pre-Med","Pre-Law","Other"],Us=["Freshman","Sophomore","Junior","Senior","Graduate"];function ks({userEmail:m,userName:F,userSchool:i,accessToken:u,onComplete:h,existingProfile:a}){const[r,c]=o.useState(1),[N,U]=o.useState(1),[G,Oe]=o.useState(a?.school||(i==="Pending"?"":i)),[M,Le]=o.useState(a?.name||F||""),[W,Ee]=o.useState(a?.age?.toString()||""),[S,Fe]=o.useState(a?.major||""),[$,Ge]=o.useState(a?.major&&!Ae.includes(a.major)?a.major:""),[z,Te]=o.useState(a?.year||""),[k,ne]=o.useState(()=>a?.photos&&Array.isArray(a.photos)?a.photos:a?.imageUrl?[a.imageUrl]:a?.profilePicture?[a.profilePicture]:[]),[ie,ce]=o.useState(!1),[f,de]=o.useState(a?.interests||[]),[b,me]=o.useState(a?.personality||[]),[T,he]=o.useState(a?.sleepSchedule||a?.livingHabits?.sleepSchedule||""),[H,Be]=o.useState(a?.cleanliness||a?.livingHabits?.cleanliness||""),[J,Ie]=o.useState(a?.livingHabits?.guests||""),[Y,Me]=o.useState(a?.livingHabits?.noise||""),[P,ze]=o.useState(a?.bio||""),ue=s=>s.toLowerCase().replace(/ /g,"-"),Pe=re.map(s=>ue(s)),De=(a?.lookingFor||[]).map(s=>{const t=ue(s),l=Pe.indexOf(t);return l>=0?re[l]:s}).filter(Boolean),[B,pe]=o.useState(De),p=s=>s.toLowerCase().replace(/ /g,"-"),xe=s=>s.map(p),ye=a?.goals?.academic||[],je=xe(oe),V=ye.find(s=>!je.includes(p(s))),ve=ye.map(s=>{const t=p(s),l=je.indexOf(t);return l>=0?oe[l]:s}).filter(Boolean),[A,ge]=o.useState(V?[...ve.filter(s=>p(s)!==p(V)),"Other"]:ve),fe=a?.goals?.leisure||[],be=xe(le),_=fe.find(s=>!be.includes(p(s))),Ne=fe.map(s=>{const t=p(s),l=be.indexOf(t);return l>=0?le[l]:s}).filter(Boolean),[O,Se]=o.useState(_?[...Ne.filter(s=>p(s)!==p(_)),"Other"]:Ne),[K,Re]=o.useState(a?.goals?.career||""),[Q,We]=o.useState(a?.goals?.personal||""),[q,$e]=o.useState(V||""),[X,He]=o.useState(_||""),[Z,Je]=o.useState(a?.additionalInfo||""),[Ye,Ve]=o.useState(!1),[_e,D]=o.useState(!1),L=10,Ke=r/L*100,Qe=()=>{if(r===1&&!G){n.error("Please select your school");return}if(r===2&&(!M||!W||!S||!z)){n.error("Please fill in all fields");return}if(r===3&&k.length===0){n.error("Please upload at least one photo");return}if(r===4&&f.length<3){n.error("Please select at least 3 interests");return}if(r===5&&b.length<3){n.error("Please select at least 3 personality traits");return}if(r===6&&(!T||!H||!J||!Y)){n.error("Please answer all living habit questions");return}if(r===7&&P.length<20){n.error("Please write a bio (at least 20 characters)");return}if(r===8&&B.length===0){n.error("Please select what you're looking for");return}if(r<L){if(r===9){D(!0);return}U(1),c(r+1)}else ee()},qe=()=>{r>1&&(U(-1),c(r-1))},Xe=async s=>{const t=s.target.files;if(!(!t||t.length===0)){if(k.length+t.length>6){n.error("Maximum 6 photos allowed");return}ce(!0);for(let l=0;l<t.length;l++){const x=t[l];if(x.size>5242880){n.error(`${x.name} is too large (max 5MB)`);continue}try{const w=new FileReader;w.onloadend=async()=>{const y=w.result,we=await fetch(`https://${R}.supabase.co/functions/v1/make-server-2516be19/upload-photo`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({image:y,fileName:x.name})});if(!we.ok)throw new Error("Upload failed");const ns=await we.json();ne(is=>[...is,ns.url]),n.success("Photo uploaded!")},w.readAsDataURL(x)}catch(w){console.error("Photo upload error:",w),n.error("Failed to upload photo")}}ce(!1)}},Ze=s=>{ne(t=>t.filter((l,x)=>x!==s))},es=s=>{if(f.includes(s))de(t=>t.filter(l=>l!==s));else{if(f.length>=10){n.error("Maximum 10 interests");return}de(t=>[...t,s])}},ss=s=>{if(b.includes(s))me(t=>t.filter(l=>l!==s));else{if(b.length>=8){n.error("Maximum 8 traits");return}me(t=>[...t,s])}},ts=s=>{B.includes(s)?pe(t=>t.filter(l=>l!==s)):pe(t=>[...t,s])},as=s=>{s!=="Other"&&(A.includes(s)?ge(t=>t.filter(l=>l!==s)):ge(t=>[...t,s]))},rs=s=>{s!=="Other"&&(O.includes(s)?Se(t=>t.filter(l=>l!==s)):Se(t=>[...t,s]))},ee=async()=>{try{const s=A.map(y=>y==="Other"&&q?q:y.toLowerCase().replace(/ /g,"-")),t=O.map(y=>y==="Other"&&X?X:y.toLowerCase().replace(/ /g,"-")),l={name:M,school:G,age:parseInt(W),major:S==="Other"?$:S,year:z,bio:P,interests:f,personality:b,lookingFor:B.map(y=>y.replace(/^[^\s]+\s/,"").toLowerCase().replace(/ /g,"-")),photos:k,profilePicture:k[0]||"",sleepSchedule:T,cleanliness:H,guests:J,noise:Y,goals:{academic:s,leisure:t,career:K.trim()||void 0,personal:Q.trim()||void 0},additionalInfo:Z.trim()||void 0},x=await fetch(`https://${R}.supabase.co/functions/v1/make-server-2516be19/profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify(l)});if(!x.ok)throw new Error("Failed to save profile");const w=await x.json();if(a?n.success("Profile updated! ðŸŽ‰"):n.success("Profile created! ðŸŽ‰"),!a&&!Ye){D(!0);return}h(w)}catch(s){console.error("Profile save error:",s),n.error(a?"Failed to update profile":"Failed to create profile")}},os=async s=>{Ve(!0),D(!1);try{const t=await fetch(`https://${R}.supabase.co/functions/v1/make-server-2516be19/profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({bondPrint:s,hasCompletedBondPrint:!0})});if(!t.ok)throw new Error("Failed to save Bond Print");const l=await t.json();n.success("Bond Print completed! ðŸŽ‰"),h(l)}catch(t){console.error("Bond Print save error:",t),n.error("Failed to save Bond Print"),ee()}},ls={enter:s=>({x:s>0?300:-300,opacity:0}),center:{x:0,opacity:1},exit:s=>({x:s>0?-300:300,opacity:0})};return e.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-50 to-pink-50 flex flex-col",style:{height:"100vh",height:"100dvh",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[e.jsx("div",{className:"bg-white border-b px-4 py-4 flex-shrink-0 z-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-xl",children:"Create Your Profile"}),e.jsxs("span",{className:"text-sm text-[#64748b]",children:["Step ",r," of ",L]})]}),e.jsx(ds,{value:Ke,className:"h-2"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(bs,{mode:"wait",custom:N,children:e.jsxs(cs.div,{custom:N,variants:ls,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},children:[r===1&&e.jsx(Ss,{value:G,onChange:Oe}),r===2&&e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(I,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"Let's start with the basics"}),e.jsx("p",{className:"text-sm text-[#475569]",children:"Tell us about yourself"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",children:"Full Name"}),e.jsx(g,{id:"name",value:M,onChange:s=>Le(s.target.value),placeholder:"Enter your name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"age",children:"Age"}),e.jsx(g,{id:"age",type:"number",value:W,onChange:s=>Ee(s.target.value),placeholder:"Enter your age",min:"18",max:"100"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"major",children:"Major"}),e.jsxs("select",{id:"major",value:S,onChange:s=>Fe(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Select your major"}),Ae.map(s=>e.jsx("option",{value:s,children:s},s))]}),S==="Other"&&e.jsx(g,{className:"mt-2",value:$,onChange:s=>Ge(s.target.value),placeholder:"Enter your major"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"year",children:"Year"}),e.jsxs("select",{id:"year",value:z,onChange:s=>Te(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Select your year"}),Us.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"bg-[#2E7B9115] rounded-2xl p-3 text-sm text-[#1E4F74]",children:["ðŸ“ School: ",e.jsx("span",{className:"font-medium",children:G})]})]})}),r===3&&e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(us,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"Add your photos"}),e.jsx("p",{className:"text-sm text-[#475569]",children:"Upload 1-6 photos (first photo will be your profile picture)"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[k.map((s,t)=>e.jsxs("div",{className:"relative aspect-square",children:[e.jsx("img",{src:s,alt:`Photo ${t+1}`,className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{onClick:()=>Ze(t),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(ps,{className:"w-4 h-4"})}),t===0&&e.jsx("div",{className:"absolute bottom-1 left-1 bg-purple-600 text-white text-xs px-2 py-1 rounded",children:"Profile"})]},t)),k.length<6&&e.jsxs("label",{className:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-purple-500 hover:bg-purple-50 transition-colors",children:[e.jsx(xs,{className:"w-8 h-8 text-gray-400 mb-1"}),e.jsx("span",{className:"text-xs text-[#64748b]",children:"Upload"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Xe,className:"hidden",disabled:ie})]})]}),ie&&e.jsx("p",{className:"text-center text-sm text-purple-600",children:"Uploading..."}),e.jsx("div",{className:"bg-[#2E7B9115] rounded-2xl p-3 text-sm text-[#1E4F74]",children:"ðŸ’¡ Tip: Choose clear photos that show your personality!"})]})}),r===4&&e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(ys,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"What are you into?"}),e.jsx("p",{className:"text-sm text-[#475569]",children:"Select 3-10 interests"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ws.map(s=>e.jsxs(te,{onClick:()=>es(s),className:`cursor-pointer transition-all ${f.includes(s)?"bg-purple-600 text-white hover:bg-purple-700":"bg-[#F9F6F3] text-[#1E4F74] hover:bg-[#EAEAEA]"}`,children:[s,f.includes(s)&&e.jsx(E,{className:"w-3 h-3 ml-1"})]},s))}),e.jsxs("p",{className:"text-sm text-center text-[#64748b]",children:[f.length," selected"]})]})}),r===5&&e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(I,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"Describe your personality"}),e.jsx("p",{className:"text-sm text-[#475569]",children:"Select 3-8 traits that fit you"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Cs.map(s=>e.jsxs(te,{onClick:()=>ss(s),className:`cursor-pointer transition-all ${b.includes(s)?"bg-purple-600 text-white hover:bg-purple-700":"bg-[#F9F6F3] text-[#1E4F74] hover:bg-[#EAEAEA]"}`,children:[s,b.includes(s)&&e.jsx(E,{className:"w-3 h-3 ml-1"})]},s))}),e.jsxs("p",{className:"text-sm text-center text-[#64748b]",children:[b.length," selected"]})]})}),r===6&&e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(ae,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"Living preferences"}),e.jsx("p",{className:"text-sm text-[#475569]",children:"Help potential roommates know your style"})]}),e.jsxs("div",{children:[e.jsxs(d,{className:"flex items-center gap-2 mb-2",children:[T==="early"?e.jsx(Ue,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"}),"Sleep Schedule"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(C,{type:"button",variant:T==="early"?"default":"outline",onClick:()=>he("early"),className:"gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Early Bird"]}),e.jsxs(C,{type:"button",variant:T==="night"?"default":"outline",onClick:()=>he("night"),className:"gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),"Night Owl"]})]})]}),e.jsxs("div",{children:[e.jsxs(d,{className:"flex items-center gap-2 mb-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Cleanliness Level"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["neat","moderate","relaxed"].map(s=>e.jsx(C,{type:"button",variant:H===s?"default":"outline",onClick:()=>Be(s),className:"capitalize",children:s},s))})]}),e.jsxs("div",{children:[e.jsxs(d,{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{className:"w-4 h-4"}),"Guests Policy"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["often","sometimes","rarely"].map(s=>e.jsx(C,{type:"button",variant:J===s?"default":"outline",onClick:()=>Ie(s),className:"capitalize",children:s},s))})]}),e.jsxs("div",{children:[e.jsxs(d,{className:"flex items-center gap-2 mb-2",children:[e.jsx(js,{className:"w-4 h-4"}),"Noise Tolerance"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["quiet","moderate","lively"].map(s=>e.jsx(C,{type:"button",variant:Y===s?"default":"outline",onClick:()=>Me(s),className:"capitalize",children:s},s))})]})]})}),r===7&&e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(I,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"Tell your story"}),e.jsx("p",{className:"text-sm text-[#475569]",children:"Write a short bio about yourself"})]}),e.jsxs("div",{children:[e.jsx(Ce,{value:P,onChange:s=>ze(s.target.value),placeholder:"Hi! I'm a [major] student who loves [interests]. Looking to connect with people who are into [activities]. Fun fact about me: [something unique]...",rows:8,className:"resize-none"}),e.jsxs("p",{className:"text-sm text-[#64748b] mt-2",children:[P.length," / 500 characters"]})]}),e.jsx("div",{className:"bg-[#2E7B9115] rounded-2xl p-3 text-sm text-[#1E4F74]",children:"ðŸ’¡ Tip: Be authentic and show your personality!"})]})}),r===8&&e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(ke,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"What brings you here?"}),e.jsx("p",{className:"text-sm text-[#475569]",children:"Select all that apply"})]}),e.jsx("div",{className:"space-y-2",children:re.map(s=>e.jsx("button",{onClick:()=>ts(s),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${B.includes(s)?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:s}),B.includes(s)&&e.jsx(E,{className:"w-5 h-5 text-purple-600"})]})},s))})]})}),r===9&&e.jsx(j,{children:e.jsxs(v,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(I,{className:"w-12 h-12 text-purple-600 mx-auto mb-2"}),e.jsx("h3",{className:"text-xl mb-1",children:"What are your goals?"}),e.jsx("p",{className:"text-sm text-[#475569] mb-2",children:"Help us connect you with like-minded people on campus"}),e.jsx(te,{variant:"secondary",className:"text-xs",children:"Optional - You can skip this step"})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-base font-semibold mb-3 block",children:"Academic Goals"}),e.jsx("div",{className:"space-y-2",children:oe.map(s=>e.jsx("button",{onClick:()=>as(s),className:`w-full p-3 rounded-lg border-2 transition-all text-left ${A.includes(s)?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:s}),A.includes(s)&&e.jsx(E,{className:"w-4 h-4 text-purple-600"})]})},s))}),A.includes("Other")&&e.jsx(g,{placeholder:"Describe your academic goal...",value:q,onChange:s=>$e(s.target.value),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-base font-semibold mb-3 block",children:"Leisure Goals"}),e.jsx("div",{className:"space-y-2",children:le.map(s=>e.jsx("button",{onClick:()=>rs(s),className:`w-full p-3 rounded-lg border-2 transition-all text-left ${O.includes(s)?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:s}),O.includes(s)&&e.jsx(E,{className:"w-4 h-4 text-purple-600"})]})},s))}),O.includes("Other")&&e.jsx(g,{placeholder:"Describe your leisure goal...",value:X,onChange:s=>He(s.target.value),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-base font-semibold mb-2 block",children:"Career Goal (Optional)"}),e.jsx(g,{placeholder:"e.g., Software Engineer at Google, Medical School, Start my own business",value:K,onChange:s=>Re(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-base font-semibold mb-2 block",children:"Personal Goal (Optional)"}),e.jsx(g,{placeholder:"e.g., Get fit, Learn Spanish, Read more books",value:Q,onChange:s=>We(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-base font-semibold mb-2 block",children:"Anything else we should know? (Optional)"}),e.jsx(Ce,{placeholder:"Tell us anything else that would help our AI match you with the right people... (e.g., hobbies, values, what you're looking for in connections, etc.)",value:Z,onChange:s=>Je(s.target.value),rows:4,className:"resize-none"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ðŸ’¡ This helps our AI understand you better and make more personalized connection suggestions"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:["ðŸ’¡ ",e.jsx("strong",{children:"Note:"})," Class schedule matching for study partners will be available soon!"]})]})})]},r)})})}),e.jsx("div",{className:"bg-white border-t px-4 flex-shrink-0 z-10",style:{paddingTop:"1rem",paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:e.jsxs("div",{className:"max-w-2xl mx-auto flex gap-3",children:[r>1&&e.jsxs(C,{variant:"outline",onClick:qe,className:"gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),"Back"]}),e.jsxs(C,{onClick:Qe,className:"flex-1 gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[r===L?"Complete":r===9?"Skip or Complete":"Next",r<L&&r!==9&&e.jsx(gs,{className:"w-4 h-4"}),r===L&&e.jsx(E,{className:"w-4 h-4"})]})]})}),_e&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsx(fs,{userProfile:{name:M,school:G,major:S==="Other"?$:S,year:z,interests:f,personality:b,goals:{academic:A,leisure:O,career:K,personal:Q},additionalInfo:Z},accessToken:u,onComplete:os,onSkip:a?()=>{D(!1),ee()}:void 0})})})]})}function Ws({accessToken:m,onComplete:F,existingProfile:i}){const[u,h]=se.useState(null),[a,r]=se.useState(!0);return se.useEffect(()=>{(async()=>{if(i){h({email:i.email||"",name:i.name||"",school:i.school||""}),r(!1);return}try{const N=await fetch(`https://${R}.supabase.co/functions/v1/make-server-2516be19/user-info`,{headers:{Authorization:`Bearer ${m}`}});if(N.ok){const U=await N.json();h({email:U.email||"",name:U.name||"",school:U.school||""})}else h({email:"",name:"",school:""})}catch(N){console.error("Error loading user info:",N),h({email:"",name:"",school:""})}finally{r(!1)}})()},[m,i]),a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{children:"Loading..."})}):e.jsx(ks,{userEmail:u?.email||i?.email||"",userName:u?.name||i?.name||"",userSchool:u?.school||i?.school||"",accessToken:m,onComplete:F,existingProfile:i})}export{Ws as ProfileSetup};
